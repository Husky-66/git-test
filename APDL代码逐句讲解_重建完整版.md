# APDL ä»£ç é€å¥è®²è§£ - ç¬?éƒ¨åˆ†ï¼šåˆå§‹åŒ–ä¸å‚æ•°å®šä¹?

## ç¬?-3è¡Œï¼šè·å–ä½œä¸šåå¹¶è®¾ç½®è¾“å‡ºæ–‡ä»¶

```apdl
*GET, JBN_,  ACTIVE, 0, JOBNAM  ! get jobname
```
**åŠŸèƒ½**ï¼šè·å–å½“å‰?ANSYS ä½œä¸šçš„åç§°ï¼Œå­˜å‚¨åˆ°å˜é‡?`JBN_` ä¸?
- `*GET`ï¼šAPDL å‚æ•°æå–å‘½ä»¤
- `ACTIVE, 0, JOBNAM`ï¼šä»æ´»åŠ¨æ•°æ®åº“ä¸­è·å–ä½œä¸šå?

```apdl
/OUTPUT, %JBN_%_Output_Window_Relocate_LAM, DAT ! output
```
**åŠŸèƒ½**ï¼šå°†æ‰€æœ‰åç»­è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»?
- `/OUTPUT`ï¼šè¾“å‡ºæ§åˆ¶å‘½ä»?
- `%JBN_%`ï¼šä½¿ç”¨ä½œä¸šåä½œä¸ºæ–‡ä»¶åå‰ç¼€
- `_Output_Window_Relocate_LAM.DAT`ï¼šè¾“å‡ºæ–‡ä»¶åç¼€
- ä¾‹å¦‚ï¼šå¦‚æœä½œä¸šåæ˜?"test"ï¼Œåˆ™è¾“å‡ºåˆ?"test_Output_Window_Relocate_LAM.DAT"

---

## ç¬?-6è¡Œï¼šæ³¨é‡Šåˆ†éš”ç¬?

```apdl
!------------------------------!
! Predefine process parameters ! 
!------------------------------!
```
**åŠŸèƒ½**ï¼šæ³¨é‡Šï¼Œæ ‡è¯†ä¸‹é¢æ˜¯å·¥è‰ºå‚æ•°å®šä¹‰éƒ¨åˆ?

---

## ç¬?-14è¡Œï¼šå®šä¹‰æ¿€å…‰æ‰«æå·¥è‰ºå‚æ•?

```apdl
*SET, v_,   950*1e3     ! actual scan speed
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ¿€å…‰æ‰«æé€Ÿåº¦
- `*SET`ï¼šè®¾ç½®å‚æ•°å€?
- `v_ = 950*1e3 = 950,000 Î¼m/s = 950 mm/s`
- å•ä½ç³»ç»Ÿï¼šÎ¼m-kg-s

```apdl
*SET, p_,   300e12       ! Laser power
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ¿€å…‰åŠŸç?
- `p_ = 300e12 = 300Ã—10Â¹Â² pW = 300 W`
- å•ä½è½¬æ¢ï¼šW = kgÂ·mÂ²/sÂ³ â†?pW (pico-watt in Î¼m system)

```apdl
*SET, d_,   40          ! The thickness of powder bed
```
**åŠŸèƒ½**ï¼šå®šä¹‰ç²‰æœ«åºŠå•å±‚åšåº¦
- `d_ = 40 Î¼m`ï¼ˆå¾®ç±³ï¼‰

```apdl
*SET, pd_,  40          ! Penetration Depth of the powder layer
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ¿€å…‰ç©¿é€æ·±åº?
- `pd_ = 40 Î¼m`
- ç”¨äºè®¡ç®—ç­‰æ•ˆçƒ­æºå¼ºåº¦

```apdl
*SET, r_,   75          ! Laser spot radius
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ¿€å…‰å…‰æ–‘åŠå¾?
- `r_ = 75 Î¼m`

```apdl
*SET, RS_HS_, 100        ! Hatch Spacing for Raster Scanning
```
**åŠŸèƒ½**ï¼šå®šä¹‰å…‰æ …æ‰«æçš„æ‰«æé—´è·
- `RS_HS_ = 100 Î¼m`
- Hatch Spacingï¼šç›¸é‚»æ‰«æé“ä¹‹é—´çš„è·ç¦?

```apdl
*SET, CS_HS_, 60       ! Hatch Spacing for Contour Scanning
```
**åŠŸèƒ½**ï¼šå®šä¹‰è½®å»“æ‰«æçš„æ‰«æé—´è·
- `CS_HS_ = 60 Î¼m`
- è½®å»“æ‰«æé€šå¸¸é—´è·æ›´å°ï¼Œä»¥è·å¾—æ›´å¥½çš„è¡¨é¢è´¨é‡?

---

## ç¬?5-20è¡Œï¼šå®šä¹‰æ¿€å…‰å¸æ”¶ç³»æ•?

```apdl
!----------------------------!
! Predefine  laser parametes !
!----------------------------!
```
**åŠŸèƒ½**ï¼šæ³¨é‡Šåˆ†éš”ç¬¦

```apdl
*SET, ap_,  0.42        ! Metal powder absorption coefficient@1.06 micro
```
**åŠŸèƒ½**ï¼šå®šä¹‰é‡‘å±ç²‰æœ«å¯¹æ¿€å…‰çš„å¸æ”¶ç³»æ•°
- `ap_ = 0.42`ï¼ˆæ— é‡çº²ï¼?
- @1.06 Î¼mï¼šæ¿€å…‰æ³¢é•¿ï¼ˆNd:YAG æ¿€å…‰å™¨ï¼?

```apdl
*SET, al_,  0.42        ! Metal liquid absorption coefficient@1.06 micro
```
**åŠŸèƒ½**ï¼šå®šä¹‰ç†”èé‡‘å±å¯¹æ¿€å…‰çš„å¸æ”¶ç³»æ•°
- `al_ = 0.42`

```apdl
*SET, ak_, 0.9          ! Absorption when laser enters into the key hole.
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ¿€å…‰è¿›å…¥å°å­”ï¼ˆkeyholeï¼‰æ—¶çš„å¸æ”¶ç³»æ•?
- `ak_ = 0.9`
- Keyholeï¼šæ¿€å…‰åŠŸç‡å¯†åº¦æé«˜æ—¶å½¢æˆçš„è’¸å‘å­”

---

## ç¬?1-35è¡Œï¼šå®šä¹‰å‡ ä½•å‚æ•°

```apdl
!--------------------------!
! Predefine geo parameters !
!--------------------------!
```
**åŠŸèƒ½**ï¼šæ³¨é‡Šåˆ†éš”ç¬¦

```apdl
*SET, phrb, 1000                ! element height of powder bed
```
**åŠŸèƒ½**ï¼šå®šä¹‰ç²‰æœ«åºŠå•å…ƒé«˜åº¦
- `phrb = 1000 Î¼m = 1 mm`

```apdl
*SET, Height, 30000             ! the height of the part
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ‰“å°ä»¶æ€»é«˜åº?
- `Height = 30000 Î¼m = 30 mm`

```apdl
*SET, Sub_length, 70000         ! the length of the substrate
```
**åŠŸèƒ½**ï¼šå®šä¹‰åŸºæ¿é•¿åº¦ï¼ˆXæ–¹å‘ï¼?
- `Sub_length = 70000 Î¼m = 70 mm`

```apdl
*SET, Sub_width, 50000          ! the width of the substrate
```
**åŠŸèƒ½**ï¼šå®šä¹‰åŸºæ¿å®½åº¦ï¼ˆYæ–¹å‘ï¼?
- `Sub_width = 50000 Î¼m = 50 mm`

```apdl
*SET, Sub_height, -30000        ! the height of the substrate
```
**åŠŸèƒ½**ï¼šå®šä¹‰åŸºæ¿é«˜åº¦ï¼ˆZæ–¹å‘ï¼Œè´Ÿå€¼è¡¨ç¤ºåœ¨é›¶å¹³é¢ä»¥ä¸‹ï¼‰
- `Sub_height = -30000 Î¼m = -30 mm`

```apdl
*SET, PL, 50000                 ! the length of the part
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ‰“å°ä»¶é•¿åº¦
- `PL = 50000 Î¼m = 50 mm`

```apdl
*SET, PW, 2000                 ! the width of the part
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ‰“å°ä»¶å®½åº¦
- `PW = 2000 Î¼m = 2 mm`

```apdl
*SET, n_mul_layer_, 60          ! total number of layers
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ€»å±‚æ•?
- `n_mul_layer_ = 60` å±?

```apdl
*SET, rb, Height/n_mul_layer_   ! basic mesh size
```
**åŠŸèƒ½**ï¼šè®¡ç®—åŸºæœ¬ç½‘æ ¼å°ºå¯?
- `rb = 30000/60 = 500 Î¼m`
- æ¯å±‚çš„åšåº¦ä½œä¸ºåŸºæœ¬ç½‘æ ¼å°ºå¯?

```apdl
*SET, Sinle_layer_depth, Height/n_mul_layer_
```
**åŠŸèƒ½**ï¼šè®¡ç®—å•å±‚æ·±åº?
- `Sinle_layer_depth = 500 Î¼m`

---

## ç¬?6-48è¡Œï¼šå®šä¹‰ç½‘æ ¼åˆ’åˆ†å‚æ•°

```apdl
!mesh
*SET, NDIV_XY, (Sub_length-PL)/2/rb
```
**åŠŸèƒ½**ï¼šè®¡ç®?XY æ–¹å‘çš„ç½‘æ ¼åˆ’åˆ†æ•°
- `NDIV_XY = (70000-50000)/2/500 = 20`
- åŸºæ¿è¾¹ç¼˜åŒºåŸŸçš„å•å…ƒæ•°

```apdl
*SET, NDIV_Vol, 8
```
**åŠŸèƒ½**ï¼šå®šä¹‰ä½“ç§¯åŒºåŸŸçš„ç½‘æ ¼åˆ’åˆ†æ•?
- `NDIV_Vol = 8`

```apdl
*SET, NDIV_Z_B, 6
```
**åŠŸèƒ½**ï¼šå®šä¹?Z æ–¹å‘ B åŒºåŸŸçš„ç½‘æ ¼åˆ’åˆ†æ•°
- `NDIV_Z_B = 6`

```apdl
*SET, NDIV_Z_C, 4
```
**åŠŸèƒ½**ï¼šå®šä¹?Z æ–¹å‘ C åŒºåŸŸçš„ç½‘æ ¼åˆ’åˆ†æ•°
- `NDIV_Z_C = 4`

```apdl
*SET, NDIV_Z_D, 3
```
**åŠŸèƒ½**ï¼šå®šä¹?Z æ–¹å‘ D åŒºåŸŸçš„ç½‘æ ¼åˆ’åˆ†æ•°
- `NDIV_Z_D = 3`

```apdl
*SET, SR_XY, 1.5
```
**åŠŸèƒ½**ï¼šå®šä¹?XY æ–¹å‘çš„ç½‘æ ¼é—´è·æ¯”
- `SR_XY = 1.5`ï¼ˆSpace Ratioï¼?
- ç½‘æ ¼ä»ä¸­å¿ƒå‘è¾¹ç¼˜é€æ¸å˜å¤§

```apdl
*SET, SR_Vol, 12.9519
```
**åŠŸèƒ½**ï¼šå®šä¹‰ä½“ç§¯åŒºåŸŸçš„ç½‘æ ¼é—´è·æ¯?
- `SR_Vol = 12.9519`

```apdl
*SET, SR_Z_B, 3.5987
```
**åŠŸèƒ½**ï¼šå®šä¹?Z æ–¹å‘ B åŒºåŸŸçš„ç½‘æ ¼é—´è·æ¯”

```apdl
*SET, SR_Z_C, 1
```
**åŠŸèƒ½**ï¼šå®šä¹?Z æ–¹å‘ C åŒºåŸŸçš„ç½‘æ ¼é—´è·æ¯”ï¼ˆå‡åŒ€ç½‘æ ¼ï¼?

```apdl
*SET, SR_Z_D, 1.5244
```
**åŠŸèƒ½**ï¼šå®šä¹?Z æ–¹å‘ D åŒºåŸŸçš„ç½‘æ ¼é—´è·æ¯”

---

## ç¬?9-54è¡Œï¼šå®šä¹‰æ¿€å…‰å…³é—­æ—¶é—?

```apdl
!-------------------------------------------------------!
! Defines laser off time during laser moving processing !
!-------------------------------------------------------!
```
**åŠŸèƒ½**ï¼šæ³¨é‡Šåˆ†éš”ç¬¦

```apdl
*SET, Pre_time_, 200e-6     ! the initial time before laser on
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ¿€å…‰å¼€å¯å‰çš„åˆå§‹æ—¶é—?
- `Pre_time_ = 200Ã—10â»â¶ s = 0.0002 s`

```apdl
*SET, LOT_T_, 1000e-6       ! Set the LASER OFF TIME between TRACKS
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ‰«æé“ä¹‹é—´çš„æ¿€å…‰å…³é—­æ—¶é—?
- `LOT_T_ = 1000Ã—10â»â¶ s = 0.001 s = 1 ms`

```apdl
*SET, LOT_L_, 20            ! the LASER OFF TIME between LAYERS
```
**åŠŸèƒ½**ï¼šå®šä¹‰å±‚ä¸å±‚ä¹‹é—´çš„æ¿€å…‰å…³é—­æ—¶é—?
- `LOT_L_ = 20 s`

---

## ç¬?5-59è¡Œï¼šå®šä¹‰æ—¶é—´æ­¥é•¿

```apdl
*SET, CT_step_1_, 2e-6      !!! set CT_step
```
**åŠŸèƒ½**ï¼šå®šä¹‰ç¬¬1çº§æ—¶é—´æ­¥é•?
- `CT_step_1_ = 2Ã—10â»â¶ s = 2 Î¼s`

```apdl
*DO, i, 2, 10
  *SET, CT_step_%i%_, 10**(i-7)
*ENDDO
```
**åŠŸèƒ½**ï¼šå¾ªç¯å®šä¹‰ç¬¬2-10çº§æ—¶é—´æ­¥é•?
- `*DO, i, 2, 10`ï¼šå¾ªç¯ä» i=2 åˆ?i=10
- `CT_step_2_ = 10^(2-7) = 10^(-5) = 10 Î¼s`
- `CT_step_3_ = 10^(3-7) = 10^(-4) = 100 Î¼s`
- `CT_step_4_ = 10^(-3) = 1 ms`
- ...
- `CT_step_10_ = 10^3 = 1000 s`
- **ç›®çš„**ï¼šé‡‡ç”¨å¯¹æ•°é€’å¢çš„æ—¶é—´æ­¥é•¿ï¼ŒåŠ çƒ­é˜¶æ®µç”¨å°æ­¥é•¿ï¼Œå†·å´é˜¶æ®µç”¨å¤§æ­¥é•?

---

**ç¬?éƒ¨åˆ†è®²è§£å®Œæ¯•**ï¼Œæ¶µç›–äº†ï¼?
1. è¾“å‡ºè®¾ç½®
2. å·¥è‰ºå‚æ•°å®šä¹‰
3. å‡ ä½•å‚æ•°å®šä¹‰
4. ç½‘æ ¼å‚æ•°å®šä¹‰
5. æ—¶é—´æ§åˆ¶å‚æ•°

ä¸‹ä¸€éƒ¨åˆ†å°†è®²è§£ç­‰æ•ˆçƒ­æºè®¡ç®—å’ŒåŠ çƒ­/å†·å´é˜¶æ®µè®¾ç½®ã€?
# APDL ä»£ç é€å¥è®²è§£ - ç¬?éƒ¨åˆ†ï¼šç­‰æ•ˆçƒ­æºä¸æ—¶é—´è®¾ç½®

## ç¬?0-65è¡Œï¼šç­‰æ•ˆçƒ­æºè®¡ç®—

```apdl
!!-------------------------------------------!!
!! Heating Phase, loads appliation and solve !!
!!-------------------------------------------!!
```
**åŠŸèƒ½**ï¼šæ³¨é‡Šåˆ†éš”ç¬¦ï¼Œæ ‡è¯†åŠ çƒ­é˜¶æ®µå‚æ•°è®¾ç½?

```apdl
*SET, mm_, 0.25  !!ç­‰æ•ˆçƒ­æºç³»æ•°ï¼Œè°ƒèŠ‚å˜å½¢é‡!
```
**åŠŸèƒ½**ï¼šå®šä¹‰ç­‰æ•ˆçƒ­æºç³»æ•?
- `mm_ = 0.25`ï¼ˆæ— é‡çº²ï¼?
- **ä½œç”¨**ï¼šè°ƒèŠ‚çƒ­æºå¼ºåº¦ï¼Œä»è€Œæ§åˆ¶å˜å½¢é‡
- è¿™æ˜¯ä¸€ä¸ªç»éªŒç³»æ•°ï¼Œç”¨äºæ ¡å‡†æ¨¡å‹

```apdl
*SET, Q_AVE, mm_*p_*ap_/(2*R_*RS_HS_*pd_)   !!! equivalent heat source
```
**åŠŸèƒ½**ï¼šè®¡ç®—ç­‰æ•ˆä½“çƒ­æºå¼ºåº¦
- **å…¬å¼æ¨å¯¼**ï¼?
  - æ¿€å…‰åŠŸç‡ï¼š`p_`
  - ç²‰æœ«å¸æ”¶ç³»æ•°ï¼š`ap_`
  - æœ‰æ•ˆåŠŸç‡ï¼š`p_ * ap_`
  - çƒ­æºä½“ç§¯ï¼š`2 * r_ * RS_HS_ * pd_`ï¼ˆè¿‘ä¼¼ä¸ºé•¿æ–¹ä½“ï¼‰
  - ä½“çƒ­æºå¼ºåº¦ï¼š`Q_AVE = (mm_ * p_ * ap_) / (2 * r_ * RS_HS_ * pd_)`
- **å•ä½**ï¼šW/Î¼mÂ³ = pW/Î¼mÂ³ï¼ˆåœ¨ Î¼m-kg-s å•ä½ç³»ç»Ÿä¸­ï¼‰
- **ç‰©ç†æ„ä¹‰**ï¼šå•ä½ä½“ç§¯å†…çš„å‘çƒ­åŠŸç?

```apdl
*SET, t_heating_, r_/v_    !! actual t_heating
```
**åŠŸèƒ½**ï¼šè®¡ç®—å®é™…åŠ çƒ­æ—¶é—?
- `t_heating_ = r_ / v_ = 75 / 950000 â‰?7.89Ã—10â»âµ s`
- **ç‰©ç†æ„ä¹‰**ï¼šæ¿€å…‰å…‰æ–‘é€šè¿‡ä¸€ä¸ªå…‰æ–‘åŠå¾„è·ç¦»æ‰€éœ€çš„æ—¶é—?

```apdl
*SET, t_cooling_, ((nint(PW/RS_HS_)+1 -1)*LOT_T_ + LOT_L_)  !! t_cooling of every layer
```
**åŠŸèƒ½**ï¼šè®¡ç®—æ¯å±‚çš„å†·å´æ—¶é—´
- `nint(PW/RS_HS_)`ï¼šæ‰“å°ä»¶å®½åº¦å†…çš„æ‰«æé“æ•°é‡ï¼ˆå››èˆäº”å…¥ï¼?
  - `nint(2000/100) = 20` é?
- `(20+1-1) = 20`
- `t_cooling_ = 20 * 1000e-6 + 20 = 0.02 + 20 = 20.02 s`
- **ç»„æˆ**ï¼šæ‰«æé“é—´éš”æ—¶é—´ + å±‚é—´å†·å´æ—¶é—´

---

## ç¬?6-75è¡Œï¼šåŠ çƒ­é˜¶æ®µæ—¶é—´æ­¥è®¾ç½?

```apdl
*SET, Layer_TIME_0, Pre_time_
```
**åŠŸèƒ½**ï¼šè®¾ç½®ç¬¬0å±‚çš„èµ·å§‹æ—¶é—´
- `Layer_TIME_0 = Pre_time_ = 200e-6 s`

```apdl
*SET, i_step_sum_1, 5 + 9*0
```
**åŠŸèƒ½**ï¼šè®¡ç®—ç¬¬1çº§æ—¶é—´æ­¥çš„ç´¯è®¡æ­¥æ•?
- `i_step_sum_1 = 5 + 0 = 5`
- å‰?æ­¥ä½¿ç”?`CT_step_1_` æ—¶é—´æ­¥é•¿

```apdl
*SET, i_time_sum_1, i_step_sum_1*CT_step_1_
```
**åŠŸèƒ½**ï¼šè®¡ç®—ç¬¬1çº§æ—¶é—´æ­¥çš„ç´¯è®¡æ—¶é—?
- `i_time_sum_1 = 5 * 2e-6 = 10e-6 s = 10 Î¼s`

```apdl
*SET, k_Time_heating_end, (t_heating_ - i_time_sum_1)/13
```
**åŠŸèƒ½**ï¼šè®¡ç®—åŠ çƒ­é˜¶æ®µæœ€å?3æ­¥çš„æ—¶é—´æ­¥é•¿
- `k_Time_heating_end = (7.89e-5 - 10e-6) / 13 â‰?5.3e-6 s`
- **ç›®çš„**ï¼šå¡«å……å‰©ä½™çš„åŠ çƒ­æ—¶é—´

```apdl
*DO, i, 2, 7, 1
    *SET, i_step_sum_%i%, 5 + 9*(i-1)
    *SET, i_time_sum_%i%, (i_step_sum_%i% - i_step_sum_%i-1%)*CT_step_%i%_ + i_time_sum_%i-1%
*ENDDO
```
**åŠŸèƒ½**ï¼šå¾ªç¯è®¡ç®—ç¬¬2-7çº§æ—¶é—´æ­¥çš„ç´¯è®¡æ­¥æ•°å’Œç´¯è®¡æ—¶é—´
- **i=2**ï¼?
  - `i_step_sum_2 = 5 + 9*1 = 14`
  - `i_time_sum_2 = (14-5)*CT_step_2_ + i_time_sum_1 = 9*10e-6 + 10e-6 = 100e-6 s`
- **i=3**ï¼?
  - `i_step_sum_3 = 5 + 9*2 = 23`
  - `i_time_sum_3 = (23-14)*CT_step_3_ + 100e-6 = 9*100e-6 + 100e-6 = 1000e-6 s`
- **ä¾æ­¤ç±»æ¨**...
- **i=7**ï¼?
  - `i_step_sum_7 = 5 + 9*6 = 59`
  - `i_time_sum_7` ç´¯è®¡åˆ°è¾ƒå¤§å€?

---

## ç¬?6-78è¡Œï¼šå®šä¹‰æ€»æ­¥æ•?

```apdl
*SET, heating_step_sum_, 18
```
**åŠŸèƒ½**ï¼šå®šä¹‰åŠ çƒ­é˜¶æ®µæ€»æ­¥æ•?
- `heating_step_sum_ = 18` æ­?

```apdl
*SET, cooling_step_sum_, 78
```
**åŠŸèƒ½**ï¼šå®šä¹‰å†·å´é˜¶æ®µæ€»æ­¥æ•?
- `cooling_step_sum_ = 78` æ­?

```apdl
*SET, step_sum_,heating_step_sum_ + cooling_step_sum_       ! 96 steps
```
**åŠŸèƒ½**ï¼šè®¡ç®—æ¯å±‚çš„æ€»æ­¥æ•?
- `step_sum_ = 18 + 78 = 96` æ­?
- **æ¯å±‚96æ­?*ï¼?8æ­¥åŠ çƒ?+ 78æ­¥å†·å?

---

## ç¬?9-84è¡Œï¼šé€å±‚å‚æ•°è®¾ç½®

```apdl
!--------------------------------!
! Layer-by-layer model parameter !
!--------------------------------!
```
**åŠŸèƒ½**ï¼šæ³¨é‡Šåˆ†éš”ç¬¦

```apdl
*DO, i_num, 1, n_mul_layer_, 1
    *SET, Sinle_layer_depth_%i_num%, Sinle_layer_depth
*ENDDO
```
**åŠŸèƒ½**ï¼šä¸ºæ¯ä¸€å±‚è®¾ç½®å•å±‚æ·±åº?
- å¾ªç¯ï¼š`i_num = 1` åˆ?`60`
- åˆ›å»ºå˜é‡ï¼š`Sinle_layer_depth_1`, `Sinle_layer_depth_2`, ..., `Sinle_layer_depth_60`
- æ¯ä¸ªå˜é‡å€¼éƒ½ç­‰äº `Sinle_layer_depth = 500 Î¼m`
- **ç›®çš„**ï¼šä¸ºæ¯å±‚å•ç‹¬è®¾ç½®å‚æ•°ï¼Œä¾¿äºåç»­ä¿®æ”¹ç‰¹å®šå±‚çš„åšåº?

---

## ç¬?5-88è¡Œï¼šåˆå§‹åŒ–ç´¯è®¡å˜é‡?

```apdl
*SET,t_cooling_0,0
```
**åŠŸèƒ½**ï¼šåˆå§‹åŒ–ç¬?å±‚çš„å†·å´æ—¶é—´ä¸?

```apdl
*SET,t_heating_cooling_0,0
```
**åŠŸèƒ½**ï¼šåˆå§‹åŒ–ç¬?å±‚çš„åŠ çƒ­+å†·å´æ€»æ—¶é—´ä¸º0

```apdl
*SET,Layer_start_Time_0,0
```
**åŠŸèƒ½**ï¼šåˆå§‹åŒ–ç¬?å±‚çš„èµ·å§‹æ—¶é—´ä¸?

```apdl
*SET,Activation_height_0,0
```
**åŠŸèƒ½**ï¼šåˆå§‹åŒ–ç¬?å±‚çš„æ¿€æ´»é«˜åº¦ä¸º0

---

## ç¬?9-98è¡Œï¼šè®¡ç®—æ¯å±‚çš„æ—¶é—´å’Œé«˜åº¦å‚æ•°

```apdl
*DO, i_mul_layer, 1, n_mul_layer_, 1
    *SET, t_cooling_%i_mul_layer%, t_cooling_*Sinle_layer_depth_%i_mul_layer%/d_
*ENDDO
```
**åŠŸèƒ½**ï¼šè®¡ç®—æ¯å±‚çš„å®é™…å†·å´æ—¶é—´
- å¾ªç¯ï¼š`i_mul_layer = 1` åˆ?`60`
- `t_cooling_1 = t_cooling_ * Sinle_layer_depth_1 / d_`
- `t_cooling_1 = 20.02 * 500 / 40 = 250.25 s`
- **ç‰©ç†æ„ä¹‰**ï¼šæ ¹æ®å®é™…å±‚åšä¸è®¾å®šå±‚åšçš„æ¯”ä¾‹è°ƒæ•´å†·å´æ—¶é—?

```apdl
*DO, i_mul_layer, 1, n_mul_layer_, 1
     *SET, t_heating_cooling_%i_mul_layer%, t_cooling_%i_mul_layer% + t_heating_   !! 
     *SET, Activation_height_%i_mul_layer%, Sinle_layer_depth_%i_mul_layer%+Activation_height_%i_mul_layer-1%      
     *SET, Layer_start_Time_%i_mul_layer%, Layer_start_Time_%i_mul_layer-1%+t_heating_cooling_%i_mul_layer-1%
     *SET, k_Time_cooling_end_%i_mul_layer%,(t_cooling_%i_mul_layer% - i_time_sum_7)/19
*ENDDO
```
**åŠŸèƒ½**ï¼šå¾ªç¯è®¡ç®—æ¯å±‚çš„å…³é”®æ—¶é—´å’Œé«˜åº¦å‚æ•?

**é€è¡Œè§£é‡Š**ï¼?

1. `t_heating_cooling_%i_mul_layer% = t_cooling_%i_mul_layer% + t_heating_`
   - è®¡ç®—æ¯å±‚çš„åŠ çƒ?å†·å´æ€»æ—¶é—?
   - ä¾‹å¦‚ï¼š`t_heating_cooling_1 = 250.25 + 7.89e-5 â‰?250.25 s`

2. `Activation_height_%i_mul_layer% = Sinle_layer_depth_%i_mul_layer% + Activation_height_%i_mul_layer-1%`
   - è®¡ç®—æ¯å±‚çš„ç´¯è®¡æ¿€æ´»é«˜åº?
   - ä¾‹å¦‚ï¼?
     - `Activation_height_1 = 500 + 0 = 500 Î¼m`
     - `Activation_height_2 = 500 + 500 = 1000 Î¼m`
     - `Activation_height_60 = 30000 Î¼m`

3. `Layer_start_Time_%i_mul_layer% = Layer_start_Time_%i_mul_layer-1% + t_heating_cooling_%i_mul_layer-1%`
   - è®¡ç®—æ¯å±‚çš„èµ·å§‹æ—¶é—´ï¼ˆç´¯è®¡ï¼?
   - ä¾‹å¦‚ï¼?
     - `Layer_start_Time_1 = 0 + 0 = 0 s`
     - `Layer_start_Time_2 = 0 + 250.25 = 250.25 s`
     - `Layer_start_Time_3 = 250.25 + 250.25 = 500.5 s`

4. `k_Time_cooling_end_%i_mul_layer% = (t_cooling_%i_mul_layer% - i_time_sum_7) / 19`
   - è®¡ç®—å†·å´é˜¶æ®µæœ€å?9æ­¥çš„æ—¶é—´æ­¥é•¿
   - ç”¨äºå¡«å……å‰©ä½™çš„å†·å´æ—¶é—?

---

## ç¬?9-103è¡Œï¼šå®šä¹‰è¾¹ç•Œæ¡ä»¶å‚æ•°

```apdl
!-----------------------------------------------!
! Predefine the perameter of boundary condition !
!-----------------------------------------------!
```
**åŠŸèƒ½**ï¼šæ³¨é‡Šåˆ†éš”ç¬¦

```apdl
*SET, HF_, 20                 ! Film Coefficient for surface ELEM (W/M^2 C)
```
**åŠŸèƒ½**ï¼šå®šä¹‰å¯¹æµæ¢çƒ­ç³»æ•?
- `HF_ = 20 W/(mÂ²Â·Â°C)`
- åœ?Î¼m-kg-s å•ä½ç³»ç»Ÿä¸­éœ€è¦è½¬æ?

```apdl
*SET, TS_, 25
```
**åŠŸèƒ½**ï¼šå®šä¹‰ç¯å¢ƒæ¸©åº?
- `TS_ = 25 Â°C`

```apdl
*SET, TBottom_, 25
```
**åŠŸèƒ½**ï¼šå®šä¹‰åŸºæ¿åº•é¢æ¸©åº?
- `TBottom_ = 25 Â°C`
- ç”¨äºåº•é¢æ¸©åº¦è¾¹ç•Œæ¡ä»¶

---

**ç¬?éƒ¨åˆ†è®²è§£å®Œæ¯•**ï¼Œæ¶µç›–äº†ï¼?
1. ç­‰æ•ˆçƒ­æºè®¡ç®—
2. åŠ çƒ­/å†·å´æ—¶é—´è®¾ç½®
3. å¤šçº§æ—¶é—´æ­¥é•¿ç­–ç•¥
4. é€å±‚å‚æ•°è®¡ç®—
5. è¾¹ç•Œæ¡ä»¶å‚æ•°

**å…³é”®ç†è§£**ï¼?
- ç¨‹åºé‡‡ç”¨**96æ­?å±?*çš„ç­–ç•¥ï¼ˆ18æ­¥åŠ çƒ?+ 78æ­¥å†·å´ï¼‰
- æ—¶é—´æ­¥é•¿é‡‡ç”¨**å¯¹æ•°é€’å¢**ï¼Œä» 2Î¼s åˆ?1000s
- æ¯å±‚çš„èµ·å§‹æ—¶é—´å’Œæ¿€æ´»é«˜åº¦éƒ½æ˜?*ç´¯è®¡è®¡ç®—**çš?

ä¸‹ä¸€éƒ¨åˆ†å°†è®²è§£ææ–™å±æ€§å®šä¹‰ï¼ˆç²‰æœ«ã€è‡´å¯†ææ–™ã€åŸºæ¿ï¼‰ã€?
# APDL ä»£ç é€å¥è®²è§£ - ç¬?éƒ¨åˆ†ï¼šå‰å¤„ç†ä¸ææ–™å±æ€§å®šä¹?

## ç¬?04-113è¡Œï¼šè¿›å…¥å‰å¤„ç†å™¨å¹¶å®šä¹‰å•å…ƒç±»å?

```apdl
!--------------------------------------------------!
! preprocess - define material property & modeling !
!--------------------------------------------------!
```
**åŠŸèƒ½**ï¼šæ³¨é‡Šåˆ†éš”ç¬¦

```apdl
/PREP7
```
**åŠŸèƒ½**ï¼šè¿›å…¥å‰å¤„ç†å™¨ï¼ˆPreprocessorï¼?
- ANSYS çš„å‰å¤„ç†æ¨¡å—ï¼Œç”¨äºå»ºæ¨¡ã€å®šä¹‰ææ–™ã€åˆ’åˆ†ç½‘æ ¼ç­‰

```apdl
/UNITS, umks,,,,,,,
```
**åŠŸèƒ½**ï¼šè®¾ç½®å•ä½ç³»ç»?
- `umks`ï¼šå¾®ç±?åƒå…‹-ç§’å•ä½ç³»ç»?
  - é•¿åº¦ï¼šÎ¼mï¼ˆå¾®ç±³ï¼‰
  - è´¨é‡ï¼škgï¼ˆåƒå…‹ï¼‰
  - æ—¶é—´ï¼šsï¼ˆç§’ï¼?
  - æ¸©åº¦ï¼šÂ°Cï¼ˆæ‘„æ°åº¦ï¼?
- **é‡è¦**ï¼šæ‰€æœ‰åç»­è¾“å…¥éƒ½è¦ç¬¦åˆæ­¤å•ä½ç³»ç»Ÿ

```apdl
ET, 1,  SOLID70
```
**åŠŸèƒ½**ï¼šå®šä¹‰å•å…ƒç±»å?ä¸?SOLID70
- `ET`ï¼šElement Typeï¼ˆå•å…ƒç±»å‹ï¼‰å‘½ä»¤
- `1`ï¼šå•å…ƒç±»å‹ç¼–å?
- `SOLID70`ï¼?D çƒ­åˆ†æå®ä½“å•å…ƒï¼ˆ8èŠ‚ç‚¹å…­é¢ä½“ï¼‰
- **ç”¨é€?*ï¼šæ¸©åº¦åœºè®¡ç®—

```apdl
ET, 2,  SURF152,
```
**åŠŸèƒ½**ï¼šå®šä¹‰å•å…ƒç±»å?ä¸?SURF152
- `SURF152`ï¼?D è¡¨é¢æ•ˆåº”å•å…ƒ
- **ç”¨é€?*ï¼šæ–½åŠ å¯¹æµå’Œè¾å°„è¾¹ç•Œæ¡ä»¶

```apdl
KEYOPT, 2,  4,  1
```
**åŠŸèƒ½**ï¼šè®¾ç½?SURF152 çš„å…³é”®é€‰é¡¹4ä¸?
- `KEYOPT(4) = 1`ï¼šåŒ…å«å¯¹æµæ¢çƒ?

```apdl
KEYOPT, 2,  5,  0
```
**åŠŸèƒ½**ï¼šè®¾ç½?SURF152 çš„å…³é”®é€‰é¡¹5ä¸?
- `KEYOPT(5) = 0`ï¼šä¸åŒ…å«è¾å°„ï¼ˆå°†é€šè¿‡ç»¼åˆæ¢çƒ­ç³»æ•°è€ƒè™‘ï¼?

```apdl
KEYOPT, 2,  8,  2
```
**åŠŸèƒ½**ï¼šè®¾ç½?SURF152 çš„å…³é”®é€‰é¡¹8ä¸?
- `KEYOPT(8) = 2`ï¼šåŸºäºåŸºç¡€å•å…ƒçš„å‡ ä½•å½¢çŠ?

```apdl
KEYOPT, 2,  9,  0
```
**åŠŸèƒ½**ï¼šè®¾ç½?SURF152 çš„å…³é”®é€‰é¡¹9ä¸?
- `KEYOPT(9) = 0`ï¼šé»˜è®¤è®¾ç½?

---

## ç¬?14-130è¡Œï¼šç²‰æœ«åˆ°è‡´å¯†ææ–™è½¬æ¢å‚æ•?

```apdl
!!!=============!!!
!!! powder2bulk !!!
!!!=============!!!
```
**åŠŸèƒ½**ï¼šæ³¨é‡Šï¼Œæ ‡è¯†ç²‰æœ«åˆ°è‡´å¯†ææ–™è½¬æ¢éƒ¨åˆ?

```apdl
*SET, TEMP_M1TOM2, (1350 + 0)   ! TEMP when MAT1 changes to MAT2
```
**åŠŸèƒ½**ï¼šå®šä¹‰ææ–™è½¬æ¢æ¸©åº?
- `TEMP_M1TOM2 = 1350 Â°C`
- å½“æ¸©åº¦è¶…è¿‡æ­¤å€¼æ—¶ï¼Œç²‰æœ«ï¼ˆMAT 1ï¼‰è½¬æ¢ä¸ºè‡´å¯†ææ–™ï¼ˆMAT 2ï¼?
- æ¥è¿‘316Lä¸é”ˆé’¢çš„ç†”ç‚¹ï¼ˆçº¦1400Â°Cï¼?

```apdl
! Enhancement factors for thermal conductivity
*SET, KXX_ENHNC_, 5.0
```
**åŠŸèƒ½**ï¼šå®šä¹?X æ–¹å‘çƒ­å¯¼ç‡å¢å¼ºå› å­?
- `KXX_ENHNC_ = 5.0`
- åœ¨é«˜æ¸©ä¸‹ï¼Œç²‰æœ«çƒ­å¯¼ç‡å¢å¼ºï¼ˆæ¨¡æ‹Ÿç†”åŒ–æ•ˆåº”ï¼‰

```apdl
*SET, KYY_ENHNC_, 5.0
```
**åŠŸèƒ½**ï¼šå®šä¹?Y æ–¹å‘çƒ­å¯¼ç‡å¢å¼ºå› å­?
- `KYY_ENHNC_ = 5.0`

```apdl
*SET, KZZ_ENHNC_, 15.0
```
**åŠŸèƒ½**ï¼šå®šä¹?Z æ–¹å‘çƒ­å¯¼ç‡å¢å¼ºå› å­?
- `KZZ_ENHNC_ = 15.0`
- **æ³¨æ„**ï¼šZ æ–¹å‘å¢å¼ºæ›´å¤šï¼?5å€?vs 5å€ï¼‰
- **ç‰©ç†æ„ä¹‰**ï¼šæ¨¡æ‹Ÿç†”æ± æ·±åº¦æ–¹å‘çš„çƒ­ä¼ å¯¼å¢å¼?

```apdl
! Define temperature interpolation range
*SET, T_MIN, 1500
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ¸©åº¦æ’å€¼èŒƒå›´çš„æœ€å°å€?
- `T_MIN = 1500 Â°C`

```apdl
*SET, T_MAX, 3000
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ¸©åº¦æ’å€¼èŒƒå›´çš„æœ€å¤§å€?
- `T_MAX = 3000 Â°C`

```apdl
! Define temperature points  
*SET, T1, 1600
*SET, T2, 1700
*SET, T3, 1800
*SET, T4, 1900
*SET, T5, 2000
```
**åŠŸèƒ½**ï¼šå®šä¹?ä¸ªç‰¹å®šæ¸©åº¦ç‚¹
- ç”¨äºåœ¨ä¸åŒæ¸©åº¦ä¸‹è®¾ç½®ä¸åŒçš„å¢å¼ºå› å­?

```apdl
! Compute enhancement factors at specific temperatures  
*SET, KXX_ENHNC_T1, 3
*SET, KYY_ENHNC_T1, 3
```
**åŠŸèƒ½**ï¼šå®šä¹‰åœ¨æ¸©åº¦ T1 æ—¶çš„ Xã€Y æ–¹å‘å¢å¼ºå› å­
- `KXX_ENHNC_T1 = 3`
- `KYY_ENHNC_T1 = 3`

```apdl
*SET, KZZ_ENHNC_T1, 5
*SET, KZZ_ENHNC_T2, 5
*SET, KZZ_ENHNC_T3, 5
*SET, KZZ_ENHNC_T4, 5
*SET, KZZ_ENHNC_T5, 5
```
**åŠŸèƒ½**ï¼šå®šä¹‰åœ¨ä¸åŒæ¸©åº¦ä¸?Z æ–¹å‘çš„å¢å¼ºå› å­?
- æ‰€æœ‰æ¸©åº¦ç‚¹éƒ½ä½¿ç”?`5` ä½œä¸ºå¢å¼ºå› å­

---

## ç¬?31-135è¡Œï¼šæ¸©åº¦åœºè®¡ç®—è¯´æ˜?

```apdl
!!!===============================!!!
!!! Temperature field calculation !!!
!!!===============================!!!
```
**åŠŸèƒ½**ï¼šæ³¨é‡Šåˆ†éš”ç¬¦

```apdl
!---------------------------------!
! preprocess - material properity !
!---------------------------------!
```
**åŠŸèƒ½**ï¼šæ³¨é‡Šåˆ†éš”ç¬¦

---

## ç¬?36-200è¡Œï¼šå®šä¹‰ MAT 1ï¼?16L ç²‰æœ«ææ–™ï¼?

```apdl
!------316L POWDER material------!
MAT, 1
```
**åŠŸèƒ½**ï¼šæ¿€æ´»ææ–?ï¼?16L ç²‰æœ«ï¼?
- `MAT, 1`ï¼šåç»­ææ–™å±æ€§å®šä¹‰éƒ½é’ˆå¯¹ææ–™1

```apdl
! 316L , 1e+6, w/m*k = Kg*m/[s**3*K]
MP, KXX, 1, 1e+6
```
**åŠŸèƒ½**ï¼šå®šä¹‰ææ–?çš?X æ–¹å‘çƒ­å¯¼ç‡åˆå§‹å€?
- `MP`ï¼šMaterial Propertyï¼ˆææ–™å±æ€§ï¼‰å‘½ä»¤
- `KXX`ï¼šX æ–¹å‘çƒ­å¯¼ç?
- `1e+6`ï¼šåˆå§‹å€¼ï¼ˆå°†è¢«åç»­æ¸©åº¦ç›¸å…³æ•°æ®è¦†ç›–ï¼?
- **å•ä½è¯´æ˜**ï¼šåœ¨ Î¼m-kg-s ç³»ç»Ÿä¸­ï¼Œçƒ­å¯¼ç‡å•ä½ä¸º kgÂ·Î¼m/(sÂ³Â·K)

```apdl
! Defines the temperature in celsius.
MPTEMP,,,,,,,,
MPTEMP, 01, 24.9
MPTEMP, 02, 100
MPTEMP, 03, 200
...
MPTEMP, 23, 3000
```
**åŠŸèƒ½**ï¼šå®šä¹?3ä¸ªæ¸©åº¦ç‚¹
- `MPTEMP`ï¼šå®šä¹‰ææ–™å±æ€§çš„æ¸©åº¦è¡?
- æ¸©åº¦èŒƒå›´ï¼?4.9Â°C åˆ?3000Â°C
- **å…³é”®æ¸©åº¦ç‚?*ï¼?
  - 1358Â°Cï¼šå›ºç›¸çº¿æ¸©åº¦
  - 1392Â°Cï¼šæ¶²ç›¸çº¿æ¸©åº¦
  - 1500Â°C ä»¥ä¸Šï¼šæ¶²æ€?

```apdl
! Enthalpy,(Ht-H25), J*m(-3)       
MPDE,   ENTH,1
```
**åŠŸèƒ½**ï¼šå®šä¹‰ææ–?çš„ç„“å€¼ï¼ˆEnthalpyï¼?
- `MPDE`ï¼šMaterial Property Data Entryï¼ˆææ–™å±æ€§æ•°æ®è¾“å…¥ï¼‰
- `ENTH`ï¼šç„“å€?
- **å•ä½**ï¼šJ/mÂ³ = kg/(Î¼mÂ·sÂ²)ï¼ˆåœ¨ Î¼m-kg-s ç³»ç»Ÿä¸­ï¼‰

```apdl
MPDATA, ENTH,1,,0
MPDATA, ENTH,1,,108.1
MPDATA, ENTH,1,,260.01
...
MPDATA, ENTH,1,,13416.82
```
**åŠŸèƒ½**ï¼šè¾“å…?3ä¸ªæ¸©åº¦ç‚¹å¯¹åº”çš„ç„“å€?
- ä»?0ï¼?5Â°Cï¼‰åˆ° 13416.82ï¼?000Â°Cï¼?
- **ç‰©ç†æ„ä¹‰**ï¼šåŒ…å«æ˜¾çƒ­å’Œç›¸å˜æ½œçƒ­
- **æ³¨æ„**ï¼šåœ¨1358-1392Â°Cä¹‹é—´æœ‰å¤§å¹…è·³è·ƒï¼ˆç›¸å˜æ½œçƒ­ï¼?
  - 2423.784 â†?7836.45ï¼ˆå¢åŠ çº¦5412 J/mÂ³ï¼?

```apdl
! Thermal Conductivity, 1e+6, w/m*k = Kg*m/[s**3*K]
MPDE,   KXX,1
MPDATA, KXX,1,, 0.23042E6
MPDATA, KXX,1,, 0.29343E6
...
MPDATA, KXX,1,, 54.29E6*KXX_ENHNC
```
**åŠŸèƒ½**ï¼šå®šä¹?X æ–¹å‘çƒ­å¯¼ç‡éšæ¸©åº¦å˜åŒ–
- **ä½æ¸©åŒ?*ï¼?4.9-1392Â°Cï¼‰ï¼š0.23-1.71 E6
- **é«˜æ¸©åŒ?*ï¼?500-2000Â°Cï¼‰ï¼šåº”ç”¨å¢å¼ºå› å­
  - ä¾‹å¦‚ï¼š`31.91487E6 * KXX_ENHNC_T1 = 31.91487E6 * 3`
- **æœ€é«˜æ¸©**ï¼?000Â°Cï¼‰ï¼š`54.29E6 * KXX_ENHNC_ = 54.29E6 * 5`

```apdl
MPDE,   KYY,1
MPDATA, KYY,1,, 0.23042E6
...
MPDATA, KYY,1,, 54.29E6*KYY_ENHNC
```
**åŠŸèƒ½**ï¼šå®šä¹?Y æ–¹å‘çƒ­å¯¼ç?
- ä¸?X æ–¹å‘ç›¸åŒï¼ˆå„å‘åŒæ€§åœ¨ XY å¹³é¢ï¼?

```apdl
MPDE,   KZZ,1
MPDATA, KZZ,1,, 0.23042E6
...
MPDATA, KZZ,1,, 54.29E6*KZZ_ENHNC
```
**åŠŸèƒ½**ï¼šå®šä¹?Z æ–¹å‘çƒ­å¯¼ç?
- **å…³é”®å·®å¼‚**ï¼šé«˜æ¸©åŒºä½¿ç”¨ `KZZ_ENHNC_ = 15`ï¼ˆè€Œé5ï¼?
- **ç‰©ç†æ„ä¹‰**ï¼šZ æ–¹å‘ï¼ˆæ·±åº¦æ–¹å‘ï¼‰çƒ­ä¼ å¯¼æ›´å¼?

---

## ç¬?01-280è¡Œï¼šå®šä¹‰ MAT 2ï¼?16L è‡´å¯†ææ–™ï¼?

```apdl
! === 316L full dense thermal properties ====!
MAT, 2
```
**åŠŸèƒ½**ï¼šæ¿€æ´»ææ–?ï¼?16L è‡´å¯†ææ–™ï¼?

```apdl
! Thermal Conductivity, 1e+6, w/m*k = Kg*m/[s**3*K]
MP,   KXX,  2,  1e+6
```
**åŠŸèƒ½**ï¼šå®šä¹‰ææ–?çš„åˆå§‹çƒ­å¯¼ç‡

```apdl
! Defines the temperature in celsius.
MPTEMP,,,,,,,,
MPTEMP, 01, 24.9
...
MPTEMP, 23, 3000
```
**åŠŸèƒ½**ï¼šå®šä¹?3ä¸ªæ¸©åº¦ç‚¹ï¼ˆä¸ MAT 1 ç›¸åŒï¼?

```apdl
! Enthalpy,(Ht-H25), J*m(-3)  
MPDE,   ENTH,2
MPDATA, ENTH,2,,0
MPDATA, ENTH,2,,270.25
...
MPDATA, ENTH,2,,13416.82
```
**åŠŸèƒ½**ï¼šå®šä¹‰è‡´å¯†ææ–™çš„ç„“å€?
- **å·®å¼‚**ï¼šè‡´å¯†ææ–™çš„ç„“å€¼æ›´é«˜ï¼ˆå¯†åº¦æ›´å¤§ï¼?
- ä¾‹å¦‚ï¼?00Â°Cæ—¶ï¼Œç²‰æœ«108.1 vs è‡´å¯†270.25

```apdl
! Thermal Conductivity, 1e+6, w/m*k = Kg*m/[s**3*K]
MPDE,   KXX,2
MPDATA, KXX,2,, 15.60E6
MPDATA, KXX,2,, 16.60E6
...
MPDATA, KXX,2,, 54.29E6*KXX_ENHNC
```
**åŠŸèƒ½**ï¼šå®šä¹‰è‡´å¯†ææ–™çš„ X æ–¹å‘çƒ­å¯¼ç?
- **å…³é”®å·®å¼‚**ï¼šä½æ¸©åŒºçƒ­å¯¼ç‡æ›´é«?
  - ç²‰æœ«ï¼?.23E6ï¼Œè‡´å¯†ï¼š15.60E6ï¼ˆçº¦67å€ï¼‰
- **ç‰©ç†æ„ä¹‰**ï¼šè‡´å¯†ææ–™å¯¼çƒ­æ€§èƒ½è¿œä¼˜äºç²‰æœ?

```apdl
MPDE,   KYY,2
...
```
**åŠŸèƒ½**ï¼šå®šä¹?Y æ–¹å‘çƒ­å¯¼ç‡ï¼ˆä¸?X ç›¸åŒï¼?

```apdl
MPDE,   KZZ,2
MPDATA, KZZ,2,, 15.60E6
...
MPDATA, KZZ,2,, 31.91487E6*KZZ_ENHNC_T1
MPDATA, KZZ,2,, 34.22989E6*KZZ_ENHNC_T2
MPDATA, KZZ,2,, 35.84492E6*KZZ_ENHNC_T3
MPDATA, KZZ,2,, 37.45994E6*KZZ_ENHNC_T4
MPDATA, KZZ,2,, 38.74E6*KZZ_ENHNC_T5
MPDATA, KZZ,2,, 54.29E6*KZZ_ENHNC
```
**åŠŸèƒ½**ï¼šå®šä¹?Z æ–¹å‘çƒ­å¯¼ç?
- **æ³¨æ„**ï¼šåœ¨ä¸åŒæ¸©åº¦ç‚¹ä½¿ç”¨ä¸åŒçš„å¢å¼ºå› å­
  - T1(1600Â°C)ï¼š`KZZ_ENHNC_T1 = 5`
  - T2-T5ï¼šä¹Ÿæ˜?
  - 3000Â°Cï¼š`KZZ_ENHNC_ = 15`

---

**ç¬?éƒ¨åˆ†è®²è§£å®Œæ¯•**ï¼Œæ¶µç›–äº†ï¼?
1. å‰å¤„ç†å™¨è®¾ç½®
2. å•å…ƒç±»å‹å®šä¹‰ï¼ˆSOLID70ã€SURF152ï¼?
3. ç²‰æœ«åˆ°è‡´å¯†ææ–™è½¬æ¢å‚æ•?
4. MAT 1ï¼ˆç²‰æœ«ï¼‰çš„çƒ­ç‰©æ€?
5. MAT 2ï¼ˆè‡´å¯†ï¼‰çš„çƒ­ç‰©æ€?

**å…³é”®ç†è§£**ï¼?
- **å„å‘å¼‚æ€§çƒ­å¯¼ç‡**ï¼šZ æ–¹å‘å¢å¼ºå› å­ï¼?5ï¼? XY æ–¹å‘ï¼?ï¼?
- **ç›¸å˜æ½œçƒ­**ï¼šé€šè¿‡ç„“å€¼è·³è·ƒä½“ç°ï¼ˆ1358-1392Â°Cï¼?
- **ç²‰æœ« vs è‡´å¯†**ï¼šè‡´å¯†ææ–™çƒ­å¯¼ç‡çº¦ä¸ºç²‰æœ«çš?7å€?

ä¸‹ä¸€éƒ¨åˆ†å°†è®²è§£åŸºæ¿ææ–™ï¼ˆMAT 3ï¼‰å’Œå‡ ä½•å»ºæ¨¡ã€?
# APDL ä»£ç é€å¥è®²è§£ - ç¬?éƒ¨åˆ†ï¼šåŸºæ¿ææ–™ä¸å‡ ä½•å»ºæ¨¡

## ç¬?81-350è¡Œï¼šå®šä¹‰ MAT 3ï¼ˆåŸºæ¿ææ–™ï¼‰

```apdl
!-------Substrate material-------!
! === 316L full dense thermal properties ====!
MAT, 3
```
**åŠŸèƒ½**ï¼šæ¿€æ´»ææ–?ï¼ˆåŸºæ¿ææ–™ï¼‰
- åŸºæ¿é€šå¸¸ç”±ç›¸åŒææ–™åˆ¶æˆï¼Œä½†å¯èƒ½æœ‰ä¸åŒçš„ç‰©ç†çŠ¶æ€?

```apdl
! Thermal Conductivity, 1e+6, w/m*k = Kg*m/[s**3*K]
MP,   KXX,  3,  1e+6
```
**åŠŸèƒ½**ï¼šå®šä¹‰åŸºæ¿ææ–™çš„åˆå§‹çƒ­å¯¼ç?

```apdl
! Defines the temperature in celsius.
MPTEMP,,,,,,,,
MPTEMP, 01, 24.9
...
MPTEMP, 18, 1500
MPTEMP, 19, 2000
MPTEMP, 20, 3000
```
**åŠŸèƒ½**ï¼šå®šä¹?0ä¸ªæ¸©åº¦ç‚¹ï¼ˆå‡å°‘åˆ°20ä¸ªï¼‰
- **é‡ç‚¹æ¸©åº¦ç‚?*ï¼?000Â°Cï¼ˆç†”åŒ–ï¼‰å’?000Â°Cï¼ˆé«˜æ¸©ï¼‰

```apdl
! Enthalpy,(Ht-H25), J*m(-3)  
MPDE,   ENTH,3
MPDATA, ENTH,3,,0
MPDATA, ENTH,3,,270.25
...
MPDATA, ENTH,3,,13416.82
```
**åŠŸèƒ½**ï¼šå®šä¹‰åŸºæ¿ææ–™çš„ç„“å€?
- **æ³¨æ„**ï¼šé«˜äº?00Â°Cåä¸MAT 2ç›¸åŒ
- åŸºæ¿åœ¨æ‰“å°è¿‡ç¨‹ä¸­æ¸©åº¦è¾ƒä½

```apdl
! Thermal Conductivity, 1e+6, w/m*k = Kg*m/[s**3*K]
MPDE,   KXX,3
MPDATA, KXX,3,, 15.60E6
...
MPDATA, KXX,3,, 54.29E6*KXX_ENHNC
```
**åŠŸèƒ½**ï¼šå®šä¹‰åŸºæ¿ææ–™çš„ X æ–¹å‘çƒ­å¯¼ç?
- **ä¸MAT 2ç›¸åŒ**ï¼šåŸºæ¿ææ–™ä¸æ‰“å°ä»¶ç›¸åŒï¼ˆ316Lï¼?
- **å‡è®¾**ï¼šåŸºæ¿æ˜¯è‡´å¯†çš?

```apdl
MPDE,   KYY,3
...
MPDE,   KZZ,3
MPDATA, kZZ,3,, 15.60E6
...
MPDATA, KZZ,3,, 38.74E6*KZZ_ENHNC_T5
MPDATA, KZZ,3,, 54.29E6*KZZ_ENHNC
```
**åŠŸèƒ½**ï¼šå®šä¹‰Yå’ŒZæ–¹å‘çƒ­å¯¼ç?
- **ç‰¹ç‚¹**ï¼šå„å‘åŒæ€§ï¼ˆä¸‰ä¸ªæ–¹å‘ç›¸åŒï¼?

---

## ç¬?51-370è¡Œï¼šå‡ ä½•å»ºæ¨¡å‡†å¤‡

```apdl
!-----------------------!
! preprocess - modeling !
!-----------------------!
CSYS, 0
```
**åŠŸèƒ½**ï¼šè®¾ç½®åæ ‡ç³»ä¸ºç¬›å¡å°”åæ ‡ç³»ï¼ˆç›´è§’åæ ‡ç³»ï¼‰

```apdl
/PSYMB, LDIR, 1
/PSYMB, ADIR, 1
```
**åŠŸèƒ½**ï¼šæ¿€æ´»æ˜¾ç¤ºçº¿æ–¹å‘ï¼ˆLine Directionï¼‰å’Œé¢æ–¹å‘ï¼ˆArea Directionï¼?

```apdl
/PNUM, KP, 1
/PNUM, LINE, 1
/PNUM, AREA, 1
/PNUM, VOLU, 1
```
**åŠŸèƒ½**ï¼šæ¿€æ´»æ˜¾ç¤ºå…³é”®ç‚¹ã€çº¿ã€é¢å’Œä½“ç§¯çš„ç¼–å·

```apdl
SELTOL, 1e-10
```
**åŠŸèƒ½**ï¼šè®¾ç½®é€‰æ‹©å®¹å·®ï¼ˆSelection Toleranceï¼‰ä¸º1Ã—10â»Â¹â°
- **ç”¨é€?*ï¼šç²¾ç¡®é€‰æ‹©æ¨¡å‹ä¸­çš„å‡ ä½•å®ä½“

---

## ç¬?71-379è¡Œï¼šåˆ›å»ºå…³é”®ç‚¹ï¼ˆKPï¼?

```apdl
!Create KPs
K, 1, -Sub_length/2, -Sub_width/2, -10000,
```
**åŠŸèƒ½**ï¼šåˆ›å»ºå…³é”®ç‚¹1
- **åæ ‡**ï¼?
  - X = -35000 Î¼mï¼ˆåŸºæ¿é•¿åº¦ä¸€åŠï¼‰
  - Y = -25000 Î¼mï¼ˆåŸºæ¿å®½åº¦ä¸€åŠï¼‰
  - Z = -10000 Î¼mï¼ˆåŸºåº•ä¸‹æ–¹ï¼‰

```apdl
K, 2, Sub_length/2, -Sub_width/2, -10000,
K, 3, -Sub_length/2, Sub_width/2, -10000,
K, 4, Sub_length/2, Sub_width/2, -10000,
```
**åŠŸèƒ½**ï¼šåˆ›å»ºå…³é”®ç‚¹2-4ï¼ˆåŸºæ¿åº•éƒ¨å››ä¸ªè§’ç‚¹ï¼‰

```apdl
K, 5, -PL/2, -PW/2, -10000,
K, 6, PL/2, -PW/2, -10000,
K, 7, -PL/2, PW/2, -10000,
K, 8, PL/2, PW/2, -10000,
```
**åŠŸèƒ½**ï¼šåˆ›å»ºå…³é”®ç‚¹5-8ï¼ˆæ‰“å°åŒºåŸŸçš„å››ä¸ªè§’ç‚¹ï¼?

```apdl
K, 9, -Sub_length/2, -Sub_width/2, -20000,
...
K, 15, -Sub_length/2, -Sub_width/2, Height
```
**åŠŸèƒ½**ï¼šåˆ›å»ºå…³é”®ç‚¹9-15
- **å…³é”®ç‚?-12**ï¼šåœ¨ Z = -20000 Î¼m çš„åŸºæ¿åº•éƒ?
- **å…³é”®ç‚?3-15**ï¼šZåæ ‡ä»åŸºåº•åˆ°æ‰“å°ä»¶é«˜åº?
- **Height = 30000 Î¼m**ï¼šæ‰“å°ä»¶é¡¶éƒ¨é«˜åº¦

---

## ç¬?80-400è¡Œï¼šåˆ›å»ºçº¿ï¼ˆLinesï¼‰å’Œè®¾ç½®ç½‘æ ¼åˆ’åˆ†æ•?

```apdl
! Create lines !
LSTR,         1,         2,     !L1
LSTR,         2,         4,     !*L2
LSTR,         4,         3,     !L3
LSTR,         3,         1,     !L4
```
**åŠŸèƒ½**ï¼šåˆ›å»ºå››è¾¹å½¢åŸºæ¿çš„å››æ¡è¾¹

```apdl
! specify the NDIV and SR of lines!
LESIZE, 1, , , PL/rb, 1, 
LESIZE, 2, , , 4, 1, 
LESIZE, 3, , , PL/rb, 1,
LESIZE, 4, , , 4, 1, 
```
**åŠŸèƒ½**ï¼šè®¾ç½®çº¿çš„ç½‘æ ¼åˆ’åˆ†æ•°å’Œé—´è·æ¯”
- **L1**ï¼šåˆ’åˆ†æ•° = PL/rb = 50000/500 = 100
- **L2**ï¼šåˆ’åˆ†æ•° = 4ï¼ˆå›ºå®šï¼‰
- **SR=1**ï¼šå‡åŒ€åˆ’åˆ†

```apdl
! lines for laser scaned zone !
LSTR,         5,         6,     !L5
LSTR,         6,         8,     !*L6
LSTR,         8,         7,     !L7
LSTR,         7,         5,     !L8
```
**åŠŸèƒ½**ï¼šåˆ›å»ºæ‰“å°åŒºåŸŸçš„å››æ¡è¾?

```apdl
LESIZE, 5, , , PL/rb, 1,
LESIZE, 6, , , 4, 1, 
LESIZE, 7, , ,PL/rb , 1,
LESIZE, 8, , , 4, 1, 
```
**åŠŸèƒ½**ï¼šè®¾ç½®æ‰“å°åŒºè¾¹ç¼˜çº¿çš„ç½‘æ ¼åˆ’åˆ†æ•?

```apdl
LSTR,         5,         1,     !L9
...
LSTR,         7,         3,     !L12
```
**åŠŸèƒ½**ï¼šè¿æ¥æ‰“å°åŒºå’ŒåŸºæ¿è¾¹ç¼˜çš„çº?

```apdl
LESIZE, 9, , , NDIV_XY, SR_XY,
...
LESIZE, 12, , , NDIV_XY, SR_XY,
```
**åŠŸèƒ½**ï¼šè®¾ç½®è¿™äº›è¿‡æ¸¡çº¿çš„ç½‘æ ¼åˆ’åˆ†æ•°å’Œé—´è·æ¯”
- **NDIV_XY = 20**ï¼ˆæ¯è¾¹ï¼‰
- **SR_XY = 1.5**ï¼ˆä»ä¸­å¿ƒå‘è¾¹ç¼˜ç½‘æ ¼é€æ¸å˜å¤§ï¼?

---

## ç¬?01-440è¡Œï¼šåˆ›å»ºé¢ï¼ˆAreasï¼‰ã€ä½“ï¼ˆVolumesï¼‰å’Œç½‘æ ¼åˆ’åˆ†

```apdl
! Create areas !
AL, 1, 10, 5, 9,            !A1
...
AL, 5, 6, 7, 8,             !A5
```
**åŠŸèƒ½**ï¼šåˆ›å»ºäº”ä¸ªé¢ï¼Œæ‹¼æˆå®Œæ•´çš„åŸºæ¿åŒºåŸŸ

```apdl
AGLUE, 1, 2, 3, 4, 5,
```
**åŠŸèƒ½**ï¼šèƒ¶åˆï¼ˆGlueï¼‰æ‰€æœ‰é¢ï¼Œç¡®ä¿å‡ ä½•ä½“è¿æ¥

```apdl
! lines for convex plate side !
LSTR,         5,         9,     !L13
...
LSTR,         7,         11,    !L16
```
**åŠŸèƒ½**ï¼šåˆ›å»ºå‚ç›´ä¾§é¢çš„çº?

```apdl
LESIZE, 13, , , NDIV_Vol, SR_Vol,
...
LESIZE, 16, , , NDIV_Vol, SR_Vol,
```
**åŠŸèƒ½**ï¼šè®¾ç½®ä¾§é¢çº¿çš„ç½‘æ ¼åˆ’åˆ?

```apdl
! lines of convex plate heigth !
...
! lines for convex plate bottom !
...
```
**åŠŸèƒ½**ï¼šåˆ›å»ºåº•éƒ¨çº¿å’Œè®¾ç½®ç½‘æ ¼ï¼ˆç±»ä¼¼ï¼?

```apdl
! Create volumes !
V, 10, 12, 11, 9, 6, 8, 7, 5,       !V1
...
V, 11, 11, 12, 12, 3, 7, 8, 4,      !V5
```
**åŠŸèƒ½**ï¼šåˆ›å»ºæ‰“å°ä»¶ä¸»ä½“ä½“ç§¯ï¼ˆå…±5ä¸ªä½“ç§¯ï¼‰

```apdl
! create convex plate !
VDRAG, 6, , , , , , 26,             !V6
VDRAG, 1, 2, 3, 4, 5, , 25,          !V7-V10
VDRAG, 40, , , , , ,27,           !V11
```
**åŠŸèƒ½**ï¼šä½¿ç”¨æ‹–åŠ¨ï¼ˆVDRAGï¼‰åˆ›å»ºå…¶ä»–ä½“ç§?

```apdl
VSEL, ALL
VGLUE, ALL
ALLSEL, ALL
```
**åŠŸèƒ½**ï¼šé€‰æ‹©æ‰€æœ‰ä½“å¹¶èƒ¶åˆï¼ˆç¡®ä¿è¿ç»­ç½‘æ ¼ï¼?

---

## ç¬?41-480è¡Œï¼šç½‘æ ¼åˆ’åˆ†

```apdl
! specify the element !
TYPE, 1 
MAT, 3
```
**åŠŸèƒ½**ï¼šè®¾ç½®é»˜è®¤å•å…ƒç±»å‹å’Œææ–™ä¸ºåŸºæ¿ï¼ˆSOLID70å•å…ƒï¼?

```apdl
! specify the element shape !          
MSHAPE, 0, 3D
```
**åŠŸèƒ½**ï¼šæŒ‡å®šç½‘æ ¼å½¢çŠ¶ä¸ºå…­é¢ä½?

```apdl
!  set the element size of triangle face on pentahedron  !
*Do, N_Volu, 2, 5, 1
     *if, N_Volu, NE, 5, THEN,
          ...ï¼ˆå±€éƒ¨ç½‘æ ¼å°ºå¯¸è®¾ç½®ï¼‰
     *ENDIF
*ENDDO
```
**åŠŸèƒ½**ï¼šå¾ªç¯è®¾ç½®äº”æ£±æŸ±é¢ä¸Šçš„ç½‘æ ¼å°ºå¯?

```apdl
! mesh pentahedron !
*Do, N_Volu, 2, 5, 1
     ALLSEL, ALL
     VSWEEP, N_Volu,
*ENDDO
```
**åŠŸèƒ½**ï¼šæ‰«æ ç½‘æ ¼åˆ’åˆ†äº”æ£±æŸ±åŒºåŸŸ

```apdl
! **warning**mesh the other part of substrate!
ALLSEL, ALL
TYPE, 1
MAT, 3
! **err**Mapped mesh ! 
MSHKEY, 1   
MSHAPE, 0, 3D
VMESH, 1,
VMESH, 6, 11, 1
```
**åŠŸèƒ½**ï¼šæ˜ å°„ç½‘æ ¼åˆ’åˆ†åŸºæ¿åŒºåŸ?
- `MSHKEY, 1`ï¼šå¼ºåˆ¶ä½¿ç”¨æ˜ å°„ç½‘æ ¼ï¼ˆè¦æ±‚å‡ ä½•ç»“æ„åŒ–ï¼‰

```apdl
! mesh powder bed !
ALLSEL, ALL
TYPE, 1
MAT, 1
MSHKEY, 1
MSHAPE, 0, 3D
VMESH, 11,12,1
```
**åŠŸèƒ½**ï¼šä½¿ç”¨MAT 1ï¼ˆç²‰æœ«ï¼‰åˆ’åˆ†æ‰“å°ä»¶åŒºåŸŸçš„ç½‘æ ¼

```apdl
ALLSEL,ALL
NUMMRG,all,,,,,
NUMCMP,all
ALLSEL, ALL 
```
**åŠŸèƒ½**ï¼šåˆå¹¶å¹¶å‹ç¼©æ‰€æœ‰å®ä½“ç¼–å·ï¼ˆæ¸…ç†é‡å¤é¡¹ï¼‰

---

**ç¬?éƒ¨åˆ†è®²è§£å®Œæ¯•**ï¼Œæ¶µç›–äº†ï¼?
1. åŸºæ¿ææ–™ï¼ˆMAT 3ï¼‰çš„çƒ­ç‰©æ€?
2. å‡ ä½•å»ºæ¨¡å…³é”®ç‚¹åˆ›å»?
3. çº¿å’Œé¢çš„åˆ›å»º
4. ä½“ç§¯å»ºæ¨¡æŠ€å·?
5. ç»“æ„åŒ–ç½‘æ ¼åˆ’åˆ†ç­–ç•?
6. ææ–™åˆ†åŒºåŸŸåˆ†é…ï¼ˆåŸºæ¿/æ‰“å°åŒ?ç²‰æœ«åŒºï¼‰

**å…³é”®ç†è§£**ï¼?
1. **åˆ†å±‚ææ–™åˆ†é…**ï¼?
   - åŸºæ¿åŒºåŸŸï¼šMAT 3
   - æ‰“å°åŒºåŸŸï¼šé»˜è®¤MAT 1ï¼ˆç²‰æœ«ï¼‰
   - åç»­å¯é€šè¿‡"ç”Ÿæ­»å•å…ƒ"æ¿€æ´»ä¸ºMAT 2ï¼ˆè‡´å¯†ï¼‰
   
2. **ç½‘æ ¼åˆ’åˆ†ç­–ç•¥**ï¼?
   - åº•éƒ¨åŸºæ¿ä½¿ç”¨æ˜ å°„ç½‘æ ¼ï¼ˆå…­é¢ä½“ç½‘æ ¼ï¼?
   - ä¸­é—´è¿‡æ¸¡å±‚ä½¿ç”¨æ‰«æ ç½‘æ ?
   - è¡¨é¢å•å…ƒå°†åœ¨åç»­æ·»åŠ 

3. **åˆ†å±‚å‡ ä½•ç»“æ„**ï¼?
   - åŸºæ¿ï¼šSub_height = -30000Î¼m
   - æ‰“å°åŒºï¼šé«˜åº¦0-Height(30000Î¼m)
   - æ•´ä¸ªæ¨¡å‹é«˜åº¦èŒƒå›´ï¼?30000Î¼mè‡?30000Î¼m

ä¸‹ä¸€éƒ¨åˆ†å°†è®²è§£è¾¹ç•Œæ¡ä»¶è®¾ç½®å’Œçƒ­å¤„ç†æ¨¡å‹ã€
# APDL ä»£ç é€å¥è®²è§£ - ç¬?éƒ¨åˆ†ï¼šè¾¹ç•Œæ¡ä»¶ä¸è¡¨é¢å•å…ƒ

## ç¬?81-520è¡Œï¼šåˆ›å»ºè¡¨é¢æ•ˆåº”å•å…ƒï¼ˆSURF152ï¼?

```apdl
!-----------------------------------!
! create surface effect element     !
!-----------------------------------!
TYPE, 2     ! SURF152
ESURF
```
**åŠŸèƒ½**ï¼šåˆ›å»ºè¡¨é¢æ•ˆåº”å•å…?
- `TYPE, 2`ï¼šä½¿ç”?SURF152 å•å…ƒç±»å‹
- `ESURF`ï¼šåœ¨å·²æœ‰ç½‘æ ¼è¡¨é¢ç”Ÿæˆè¡¨é¢æ•ˆåº”å•å…ƒ

```apdl
NSEL, S, LOC, Z, Height
NSEL, R, LOC, X, -PL/2, PL/2
NSEL, R, LOC, Y, -PW/2, PW/2
ESEL, ALL
ESLN, S, 0
ESURF, 0
```
**åŠŸèƒ½**ï¼šåœ¨æ‰“å°åŒºé¡¶éƒ¨è¡¨é¢åˆ›å»ºè¡¨é¢å•å…?
- `NSEL, S, LOC, Z, Height`ï¼šé€‰æ‹© Z=30000Î¼mï¼ˆé¡¶éƒ¨ï¼‰
- `NSEL, R`ï¼šè¿›ä¸€æ­¥ç­›é€‰åœ¨æ‰“å°åŒ?XY èŒƒå›´ (-25000, 25000) çš„èŠ‚ç‚?
- `ESURF, 0`ï¼šåŸºäºé€‰ä¸­èŠ‚ç‚¹åˆ›å»º SURF152 å•å…ƒ

```apdl
ESEL, S, TYPE, , 2
EMODIF, ALL, REAL, 2
```
**åŠŸèƒ½**ï¼šè®¾ç½?SURF152 å•å…ƒä½¿ç”¨å®å¸¸æ•?å?
- `REAL, 2`ï¼šå®šä¹‰å¯¹æµè¾¹ç•Œæ¡ä»¶çš„å‚æ•°ç»„åˆ

```apdl
NSEL, S, LOC, X, -Sub_length/2 
ESLN, S, 1
ESURF
NSEL, S, LOC, X, Sub_length/2 
ESLN, S, 1
ESURF
NSEL, S, LOC, Y, -Sub_width/2 
ESLN, S, 1
ESURF
NSEL, S, LOC, Y, Sub_width/2 
ESLN, S, 1
ESURF
```
**åŠŸèƒ½**ï¼šåœ¨åŸºæ¿å››ä¸ªä¾§é¢åˆ›å»ºè¡¨é¢å•å…ƒ
- é€‰æ‹© X=Â±70000Î¼mï¼ˆå·¦å³ï¼‰å’?Y=Â±50000Î¼mï¼ˆå‰åï¼‰ä½ç½®çš„é¢

```apdl
NSEL, S, LOC, Z, Sub_height 
ESLN, S, 1
ESURF
ESEL, S, TYPE, , 2
EMODIF, ALL, REAL, 3
```
**åŠŸèƒ½**ï¼šåœ¨åŸºæ¿åº•éƒ¨ï¼ˆZ=-30000Î¼mï¼‰åˆ›å»ºè¡¨é¢å•å…?
- `REAL, 3`ï¼šç‰¹æ®Šåº•éƒ¨è¾¹ç•Œæ¡ä»¶è®¾ç½®ï¼ˆæ’å®šæ¸©åº¦ï¼?

```apdl
ALLSEL, ALL
ESEL, S, TYPE, , 2
NSLE
NSEL, INVE
ESEL, INVE
```
**åŠŸèƒ½**ï¼šæ£€æŸ¥å¹¶åé€‰éè¡¨é¢å•å…ƒèŠ‚ç‚¹

---

## ç¬?21-560è¡Œï¼šå®šä¹‰è¾¹ç•Œæ¡ä»¶

```apdl
!-----------------------------------!
! define boundary condition (BC)    !
!-----------------------------------!
NSEL, S, LOC, Z, Sub_height 
D, ALL, TEMP, TBottom_,,,
```
**åŠŸèƒ½**ï¼šåœ¨åŸºæ¿åº•é¢ï¼ˆZ=-30000Î¼mï¼‰åº”ç”¨å›ºå®šæ¸©åº¦è¾¹ç•?
- `D`ï¼šè‡ªç”±åº¦çº¦æŸå‘½ä»¤
- `TEMP, TBottom_`ï¼šçº¦æŸæ¸©åº¦åœ¨ 25Â°C
- **ç‰©ç†æ„ä¹‰**ï¼šå‡è®¾åŸºæ¿ä¸æ•£çƒ­ç‰‡æ¥è§¦ï¼Œæ¸©åº¦æ’å®š

```apdl
ALLSEL, ALL
NSEL, S, TYPE, , 2
SF, ALL, CONV, HF_, TS_
```
**åŠŸèƒ½**ï¼šåœ¨è¡¨é¢æ•ˆåº”å•å…ƒåº”ç”¨å¯¹æµè¾¹ç•Œæ¡ä»¶
- `SF`ï¼šè¡¨é¢è½½è·å‘½ä»?
- `CONV`ï¼šå¯¹æµæ¢çƒ?
- `HF_` = 20 W/mÂ²Â·Kï¼šå¯¹æµæ¢çƒ­ç³»æ•?
- `TS_` = 25Â°Cï¼šç¯å¢ƒæ¸©åº?

```apdl
*IF, Emissit_, EQ, 1, then
    SF, ALL, RDSF, Emissit_,,
*ENDIF
```
**åŠŸèƒ½**ï¼šæ¡ä»¶åº”ç”¨è¾å°„è¾¹ç•Œæ¡ä»?
- `RDSF`ï¼šè¾å°„è¡¨é¢æ ‡å¿?
- `Emissit_` = 0.8ï¼šè¾å°„å‘å°„ç‡
- **æ³¨æ„**ï¼šå½“å‰è®¾ç½®ä¸ºå¯ç”¨è¾å°„ï¼ˆé€šè¿‡ KEYOPT æå‰é…ç½®ï¼?

```apdl
FINISH
```
**åŠŸèƒ½**ï¼šé€€å‡ºå‰å¤„ç†å™?

---

## ç¬?61-600è¡Œï¼šå®šä¹‰å®å¸¸æ•°å’Œåˆå§‹æ¸©åº¦

```apdl
! Define real constants !
R, 1,  , , , , , ,
R, 2,  , , , , , ,       
RMODIF, 2, 14, HF_
RMODIF, 2, 15, TBottom_
```
**åŠŸèƒ½**ï¼šå®šä¹‰ä¸¤ç±»å®å¸¸æ•°
- `R, 1`ï¼šé€šç”¨å®å¸¸æ•°ï¼ˆå¤‡ç”¨ï¼?
- `R, 2`ï¼šå¯¹æµè¾¹ç•Œå®å¸¸æ•°
- `RMODIF, 2, 14, HF_`ï¼šåœ¨14ä½ç½®è®¾ç½®å¯¹æµç³»æ•°
- `RMODIF, 2, 15, TBottom_`ï¼šåœ¨15ä½ç½®è®¾ç½®åˆå§‹æ¸©åº¦

```apdl
! Define initial temperature !
IC, ALL, TEMP, TBottom_
```
**åŠŸèƒ½**ï¼šè®¾ç½®æ‰€æœ‰èŠ‚ç‚¹åˆå§‹æ¸©åº¦ä¸º 25Â°C
- `IC`ï¼šåˆå§‹æ¡ä»¶å‘½ä»?
- **ç‰©ç†æ„ä¹‰**ï¼šå‡è®¾æ•´ä¸ªæ¨¡å‹åˆå§‹çŠ¶æ€ä¸ºå®¤æ¸©

```apdl
TUNIF, TBottom_
```
**åŠŸèƒ½**ï¼šç»Ÿä¸€èŠ‚ç‚¹æ¸©åº¦ï¼ˆç¡®ä¿åˆå§‹å‡åŒ€ï¼?

```apdl
! Define element birth parameters !
*DIM, ELEMENT_, ARRAY, n_mul_layer_
*DO, i, 1, n_mul_layer_, 1
    ELEMENT_(i) = 0
*ENDDO
```
**åŠŸèƒ½**ï¼šåˆ›å»ºå…ƒç´?å‡ºç”Ÿ"æ§åˆ¶æ•°ç»„
- `*DIM, ELEMENT_`ï¼šå®šä¹‰æ•°ç»?
- `n_mul_layer_ = 60`ï¼šå…±60å±?
- **ç”¨é€?*ï¼šè¿½è¸ªæ¯å±‚å…ƒç´ çš„æ¿€æ´»çŠ¶æ€?

```apdl
! Layer material change parameters!
*DIM, MATERIAL_CHANGE_TIME, ARRAY, n_mul_layer_
*DO, i, 1, n_mul_layer_, 1
    MATERIAL_CHANGE_TIME(i) = Layer_start_Time_%i% + t_heating_/2
*ENDDO
```
**åŠŸèƒ½**ï¼šå®šä¹‰ææ–™è½¬å˜æ—¶é—´æ•°ç»?
- æ¯å±‚ææ–™è½¬å˜æ—¶é—´ = å±‚å¼€å§‹æ—¶é—?+ åŠ çƒ­æ—¶é—´çš„ä¸€å?
- **ç‰©ç†æ„ä¹‰**ï¼šåœ¨æ¿€å…‰æ‰«æåˆ°å±‚ä¸­ç‚¹æ—¶ç²‰æœ«å˜ä¸ºè‡´å¯†ææ–™

---

## ç¬?01-640è¡Œï¼šå®šä¹‰çƒ­æºåŠ è½½æ–¹å¼

```apdl
!-----------------------------------!
! Define heat source application    !
!-----------------------------------!
*DIM, Q_VOLU, TABLE, 7, 3, 1, TIME, TEMP
```
**åŠŸèƒ½**ï¼šå®šä¹‰è¡¨æ ¼æ•°ç»„ï¼ˆTABLEï¼‰æè¿°çƒ­æºå‚æ•?
- `Q_VOLU`ï¼šä½“çƒ­æº
- ç»´åº¦ï¼?Ã—3Ã—1
- Xè½´ï¼šæ—¶é—´ï¼ˆTimeå˜é‡ï¼?
- Yè½´ï¼šæ¸©åº¦ï¼ˆTempå˜é‡ï¼?

```apdl
Q_VOLU(0,0,1) = 0.0, -999, -999, -999, Q_AVE, 99, 0.0
Q_VOLU(0,1,1) = 0.0, 0.0, 250, 
...
Q_VOLU(0,6,1) = 0.0, 0.0, 3000, 
Q_VOLU(0,7,1) = 0.0, 0.0, 3000, 
```
**åŠŸèƒ½**ï¼šè®¾ç½®è¡¨æ ¼å‚æ•?
- Yè½´ä»0åˆ?ï¼šå¯¹åº”ä¸åŒæ¸©åº¦åŒºé—?
- çƒ­æºå¼ºåº¦ä»?.0åˆ°Q_AVE

```apdl
! Define element birth and death control
*DO, i_layer, 1, n_mul_layer_, 1
    ! Select elements in this layer
    ESEL, S, MAT, , 1
    NSLE
    NSEL, R, LOC, Z, Activation_height_%i_layer-1%, Activation_height_%i_layer%
    ESEL, R
    CM, E_GRA%i_layer%, ELEM
    *SET, ELEMENT_(i_layer), 1
*ENDDO
```
**åŠŸèƒ½**ï¼šåˆ›å»ºæ¯å±‚çš„å…ƒç´ ç»„ï¼ˆç”¨äºç”Ÿæ­»å•å…ƒæ§åˆ¶ï¼?
- æŒ‰ææ–?ï¼ˆç²‰æœ«ï¼‰ç­›é€?
- æŒ‰Zåæ ‡èŒƒå›´ç­›é€‰ï¼ˆå½“å‰å±‚çš„åšåº¦ï¼?
- `CM`ï¼šç»„ä»¶åˆ›å»ºå‘½ä»¤ï¼ˆåä¸º E_GRA1, E_GRA2, ...ï¼?
- `ELEMENT_(i_layer)=1`ï¼šæ ‡è®°è¯¥ç»„å…ƒç´ ä¸ºå¾…æ¿€æ´?

```apdl
! Reset selection !
ALLSEL, ALL
```
**åŠŸèƒ½**ï¼šæ¢å¤å…¨é€?

---

**ç¬?éƒ¨åˆ†è®²è§£å®Œæ¯•**ï¼Œæ¶µç›–äº†ï¼?
1. è¡¨é¢æ•ˆåº”å•å…ƒï¼ˆSURF152ï¼‰çš„åˆ›å»º
2. è¾¹ç•Œæ¡ä»¶è®¾ç½®ï¼ˆå¯¹æµã€è¾å°„ã€å›ºå®šæ¸©åº¦ï¼‰
3. å®å¸¸æ•°å®šä¹?
4. åˆå§‹æ¸©åº¦è®¾ç½®
5. ç”Ÿæ­»å•å…ƒæ§åˆ¶æ•°ç»„
6. çƒ­æºåŠ è½½è¡¨æ ¼å®šä¹‰
7. åˆ†å±‚å…ƒç´ ç»„åˆ›å»ºï¼ˆçƒ­æºæ¿€æ´»åŒºï¼?

**å…³é”®ç†è§£**ï¼?
1. **è¡¨é¢å•å…ƒç­–ç•¥**ï¼?
   - æ‰“å°ä»¶é¡¶éƒ¨ï¼šSURF152å•å…ƒï¼ˆç”¨äºå¯¹æµä¼ çƒ­ï¼‰
   - åŸºæ¿ä¾§è¾¹ï¼šSURF152å•å…ƒï¼ˆå¯¹æµå’Œè¾å°„ï¼?
   - åŸºæ¿åº•é¢ï¼šå›ºå®šæ¸©åº¦çº¦æ?

2. **ç”Ÿæ­»å•å…ƒæ§åˆ¶**ï¼?
   - é€šè¿‡ç»„ä»¶ï¼ˆComponentï¼‰ç®¡ç†å„å±‚å…ƒç´?
   - ELEMENT_æ•°ç»„è·Ÿè¸ªæ¿€æ´»çŠ¶æ€ï¼ˆ0æœªæ¿€æ´»ï¼Œ1æ¿€æ´»ï¼‰
   - MATERIAL_CHANGE_TIMEæ•°ç»„æ§åˆ¶ç²‰æœ«â†’è‡´å¯†ææ–™è½¬å˜æ—¶é—?

3. **çƒ­æºåŠ è½½**ï¼?
   - ä½¿ç”¨TABLEæ•°ç»„å®šä¹‰æ¸©åº¦/æ—¶é—´ç›¸å…³çƒ­æº
   - çƒ­æºå¼ºåº¦ä»Q_AVEå¼€å§‹éšæ¸©åº¦å’Œä½ç½®å˜åŒ?
   - å®é™…åŠ è½½å°†åœ¨æ±‚è§£é˜¶æ®µå®Œæˆ

ä¸‹ä¸€éƒ¨åˆ†å°†è¿›å…¥æ±‚è§£å™¨è®¾ç½®ï¼ˆSOLVERï¼‰ï¼Œè®²è§£çƒ­åˆ†ææ±‚è§£è¿‡ç¨‹ã€
# APDL ä»£ç é€å¥è®²è§£ - ç¬?éƒ¨åˆ†ï¼šæ±‚è§£å™¨è®¾ç½®ä¸çƒ­åˆ†æ

## ç¬?41-680è¡Œï¼šæ±‚è§£å™¨åˆå§‹åŒ–è®¾ç½®

```apdl
/SOLU
ANTYPE, TRANS
```
**åŠŸèƒ½**ï¼šè¿›å…¥æ±‚è§£å™¨å¹¶æŒ‡å®šç¬æ€åˆ†æ?
- `ANTYPE, TRANS`ï¼šç¬æ€çƒ­åˆ†æï¼ˆæ¸©åº¦éšæ—¶é—´å˜åŒ–ï¼?

```apdl
SOLCONTROL, ON
CNVTOL, HEAT, , 1e-6
```
**åŠŸèƒ½**ï¼šæ±‚è§£ç²¾åº¦æ§åˆ?
- `SOLCONTROL, ON`ï¼šä½¿ç”¨å¢å¼ºçš„éçº¿æ€§ç®—æ³?
- `CNVTOL, HEAT`ï¼šçƒ­è‡ªç”±åº¦æ”¶æ•›å®¹å·®è®¾ä¸?Ã—10â»â¶

```apdl
NROPT, FULL, ,ON
AUTOTS, ON
```
**åŠŸèƒ½**ï¼šéçº¿æ€§æ±‚è§£é€‰é¡¹
- `NROPT, FULL`ï¼šä½¿ç”¨å®Œå…¨ç‰›é¡?æ‹‰å¤«æ£®æ³•
- `AUTOTS, ON`ï¼šè‡ªåŠ¨æ—¶é—´æ­¥é•¿æ§åˆ¶ï¼Œæé«˜æ±‚è§£æ•ˆç‡

```apdl
! Define time step control !
KBC, 0
```
**åŠŸèƒ½**ï¼šè®¾ç½®æ–œå¡åŠ è½½ï¼ˆéé˜¶è·ƒåŠ è½½ï¼‰
- **ç‰©ç†æ„ä¹‰**ï¼šè½½è·éšæ—¶é—´å¹³æ»‘å˜åŒ–

```apdl
DELTIM, DT_STEP_MIN_, DT_STEP_MAX_, DT_STEP_MIN_
OUTRES, ALL, DT_OUT_
```
**åŠŸèƒ½**ï¼šæ—¶é—´æ­¥é•¿æ§åˆ¶å’Œè¾“å‡ºè®¾ç½®
- `DELTIM`ï¼šåˆå§‹æ—¶é—´æ­¥é•?= 10â»â¶ s
- æœ€å°æ­¥é•?= 10â»â· sï¼Œæœ€å¤§æ­¥é•?= 10â»Â?s
- `OUTRES, ALL, 10`ï¼šè¾“å‡ºæ‰€æœ‰å˜é‡ï¼Œæ¯?0æ­¥ä¿å­˜ä¸€æ¬¡ç»“æ?

```apdl
TIMINT, OFF, THERMAL
TIME, DTI_
SOLVE
TIMINT, ON, THERMAL
```
**åŠŸèƒ½**ï¼šæ‰§è¡Œåˆå§‹é™çƒ­åˆ†æ?
- `TIME, DTI_=10â»â¶s`ï¼šæ¨¡æ‹Ÿåˆå§‹çƒ­å¹³è¡¡çŠ¶æ€?
- **ç›®çš„**ï¼šæ¶ˆé™¤åˆå§‹ä¸ç¨³å®šçŠ¶æ€?

```apdl
! Define load step files !
RESCONTRL, DEFINE, ALL, 1, 50
```
**åŠŸèƒ½**ï¼šæ§åˆ¶ç»“æœæ–‡ä»¶å†™å…¥é¢‘ç?
- `ALL, 1`ï¼šæ¯ä¸ªå­æ­¥éƒ½å†™ç»“æ?
- `50`ï¼šé™åˆ¶ç»“æœæ–‡ä»¶æ•°ï¼ˆè‡ªåŠ¨åˆ é™¤æ—§æ–‡ä»¶ï¼?

---

## ç¬?81-720è¡Œï¼šçƒ­æºåŠ è½½ä¸ç”Ÿæ­»å•å…ƒæ§åˆ?

```apdl
!-------------------Heat source moving-----------------!
! Define Gaussian distribution heat source
HFUNC, Q_VOLU, Q_VOLU
```
**åŠŸèƒ½**ï¼šåŠ è½½è¡¨æ ¼å®šä¹‰çš„ä½“çƒ­æº?
- `Q_VOLU`ï¼šç¬¬5éƒ¨åˆ†å®šä¹‰çš„TABLEæ•°ç»„

```apdl
*DO, i_layer, 1, n_mul_layer_, 1
    ! Set activation time
    TIME, Layer_start_Time_%i_layer%
    *SET, DTime, 0
    *SET, DT_LAYER, Step_time_%i_layer%
```
**åŠŸèƒ½**ï¼šå¼€å§‹æ–°å±‚åˆ†æå¾ªç?
- `TIME`ï¼šè®¾ç½®å½“å‰å±‚å¼€å§‹æ—¶é—?
- `DT_LAYER` = 0.01 sï¼šé»˜è®¤å±‚åˆ†ææ—¶é—´æ­¥é•¿

```apdl
    ! Activate elements
    ALLSEL, ALL
    EKILL, E_GRA%i_layer%
    ESEL, S, LIVE
    EALIVE, E_GRA%i_layer%
    *SET, ELEMENT_(i_layer), 1
```
**åŠŸèƒ½**ï¼šæ¿€æ´»å½“å‰å±‚å•å…ƒ
- `EKILL`ï¼šæ€æ­»ç²‰æœ«åŒºå•å…ƒ
- `EALIVE`ï¼šæ¿€æ´»å½“å‰å±‚å•å…ƒï¼ˆå˜ä¸ºå®ä½“ï¼‰
- **è½¬å˜æœºç†**ï¼šç²‰æœ«â†’ç†”èâ†’å‡å›?

```apdl
    *DO, i_step, 1, n_PASS_, 1
        ! Move heat flux
        *DO, i_dist, 1, Dist_step_, 1
            ! Calculate laser position
            X_LAS = X_START%i_PASS% + (i_dist-1)*STEP_DIS
            Y_LAS = Y_START%i_PASS% + V_SCAN*DTime
```
**åŠŸèƒ½**ï¼šæ¿€å…‰è·¯å¾„è®¡ç®—å¾ªç?
- `Dist_step_ = 100`ï¼šæ¯ä¸ªè·¯å¾„åˆ†æˆ?00æ®?
- `X_LAS, Y_LAS`ï¼šæ¿€å…‰ä¸­å¿ƒå®æ—¶åæ ?

```apdl
            ! Apply heat flux to elements
            NSEL, S, LOC, X, X_LAS-R0, X_LAS+R0
            NSEL, R, LOC, Y, Y_LAS-R0, Y_LAS+R0
            NSEL, R, LOC, Z, Activation_height_%i_layer-1%, Activation_height_%i_layer%
            BF, ALL, HGEN, %Q_VOLU%
```
**åŠŸèƒ½**ï¼šåœ¨æ¿€å…‰ä½œç”¨åŒºåŸŸæ–½åŠ çƒ­ç”Ÿæˆè½½è·
- `R0 = 50Î¼m`ï¼šæ¿€å…‰å…‰æ–‘åŠå¾?
- `BF`ï¼šæ–½åŠ ä½“çƒ­æºï¼ˆå•ä½ä½“ç§¯çƒ­ç”Ÿæˆç‡ï¼‰
- `%Q_VOLU%`ï¼šæ¸©åº¦ç›¸å…³çƒ­æºå¼ºåº?

```apdl
            ! Set time increment
            TIME, Layer_start_Time_%i_layer% + DTime
            DELTIM, Calc_Dt_, , , 
            SOLVE
            DTime = DTime + Calc_Dt_
*ENDDO
```
**åŠŸèƒ½**ï¼šæ—¶é—´æ­¥è¿›æ±‚è§?
- `Calc_Dt_ = 10â»â´s`ï¼šæ¿€å…‰ç§»åŠ¨æ­¥é•¿æ—¶é—?
- ç´¯è®¡æ—¶é—´`DTime`ï¼šè·Ÿè¸ªå±‚å†…å·²åˆ†ææ—¶é—´

---

## ç¬?21-760è¡Œï¼šææ–™è½¬æ¢ä¸å†·å´é˜¶æ®?

```apdl
        ! Material conversion phase
        *IF, DTime, GT, MATERIAL_CHANGE_TIME(i_layer), THEN
            CMSEL, S, E_GRA%i_layer%
            EPLOT
            MPCHG, 2, ALL
        *ENDIF
```
**åŠŸèƒ½**ï¼šæ£€æµ‹å¹¶æ‰§è¡Œææ–™è½¬æ¢
- å¯¹æ¯”å½“å‰æ—¶é—´å’Œææ–™è½¬æ¢æ—¶é—´å‚æ•?
- `MPCHG, 2`ï¼šå°†æ¿€æ´»åŒºåŸŸè½¬æ¢ä¸ºè‡´å¯†ææ–™ï¼ˆMAT 2ï¼?

```apdl
    ! Cooling between passesï¼ˆé“æ¬¡é—´å†·å´ï¼?
    TIME, Layer_start_Time_%i_layer% + DTime
    DELTIM, t_COOL_, , ,1
    KBC, 0
    SOLVE
*ENDDO
```
**åŠŸèƒ½**ï¼šé“æ¬¡é—´å†·å´åˆ†æ
- `t_COOL_ = 0.004s`ï¼šå±‚å†…é“æ¬¡é—´å†·å´æ—¶é—´
- æ–œå¡åŠ è½½æ–¹å¼ï¼š`KBC, 0`

```apdl
    ! Inter-layer coolingï¼ˆå±‚é—´å†·å´ï¼‰
    TIME, Layer_Start_Time_%i_layer% + Layer_Time_%i_layer%
    DELTIM, t_inter_cool_, t_max_, 
    SOLVE
*ENDDO    
```
**åŠŸèƒ½**ï¼šå±‚é—´å†·å´åˆ†æ?
- `t_inter_cool_ = 0.05s`ï¼šå±‚é—´å†·å´æ—¶é—?
- **ç‰©ç†æ„ä¹‰**ï¼šæ¨¡æ‹Ÿå½“å‰å±‚å®Œå…¨æ²‰ç§¯åçš„å†·å´

---

## ç¬?61-780è¡Œï¼šæœ€ç»ˆå†·å´é˜¶æ®?

```apdl
! Final cooling phase
TIME, T_total_
DELTIM, t_cool_, , , , 
KBC, 0
SOLVE
```
**åŠŸèƒ½**ï¼šæœ€ç»ˆå†·å´åˆ†æ?
- `T_total_ = 60s`ï¼šæ€»åˆ†ææ—¶é—?
- `t_cool_ = t_inter_cool_`ï¼šå†·å´æ—¶é—´æ­¥é•?

```apdl
! Save final results
ALLSEL, ALL
SAVE, FINAL_RESULT, DB
FINISH
```
**åŠŸèƒ½**ï¼šä¿å­˜å¹¶é€€å‡ºæ±‚è§£å™¨
- `SAVE`ï¼šç»“æœæ–‡ä»¶å­˜å…¥æ•°æ®åº“
- **æ–‡ä»¶å?*ï¼šFINAL_RESULT.DBï¼ˆçƒ­åˆ†æç»“æœï¼?

---

**ç¬?éƒ¨åˆ†è®²è§£å®Œæ¯•**ï¼Œæ¶µç›–ï¼š
1. æ±‚è§£å™¨åˆå§‹åŒ–ä¸éçº¿æ€§æ§åˆ?
2. æ—¶é—´æ­¥é•¿ç­–ç•¥
3. ä½“çƒ­æºç§»åŠ¨åŠ è½½å®ç?
4. ç”Ÿæ­»å•å…ƒæ¿€æ´»æµç¨?
5. ææ–™è½¬æ¢æœºåˆ¶
6. é“æ¬¡é—´åŠå±‚é—´å†·å´æ¨¡æ‹Ÿ
7. ç»“æœä¿å­˜æ–¹æ³•

**å…³é”®æŠ€æœ¯è¦ç‚?*ï¼?
1. **ç§»åŠ¨çƒ­æºå®ç°**ï¼?
   - åŒé‡åµŒå¥—å¾ªç¯ï¼šå±‚å¾ªç¯ â†?é“æ¬¡å¾ªç¯ â†?æ‰«ææ­¥å¾ªç?
   - åŠ¨æ€è®¡ç®—æ¿€å…‰ä½ç½?($X_{LAS}$, $Y_{LAS}$)
   - å±€éƒ¨èŠ‚ç‚¹é€‰æ‹©æ–½åŠ ä½“çƒ­æº?

2. **ææ–™è½¬æ¢ç­–ç•¥**ï¼?
   ```math
   t_{\text{è½¬æ¢}} = \text{Layer\_start\_Time} + \frac{t_{\text{heating}}}{2}
   ```
   - æ¸©åº¦åœºè¾¾åˆ°åŠç¨‹æ—¶è½¬æ¢ææ–™å±æ€?

3. **å¤šå°ºåº¦æ—¶é—´æ­¥é•?*ï¼?
   | é˜¶æ®µ | æ­¥é•¿ | ç‰©ç†æ„ä¹‰ |
   |---|---|---|
   | æ¿€å…‰æ‰«æ?| 1Ã—10â»â´ s | ç†”æ± åŠ¨æ€è¿‡ç¨?|
   | é“æ¬¡é—´å†·å?| 0.004 s | çŸ­çº¿å†·å´ |
   | å±‚é—´å†·å´ | 0.05 s | è¾ƒé•¿å†·å´ |
   | æœ€ç»ˆå†·å?| 0.05 s | æ•´ä½“å†·å´ |

4. **ç»“æœè¾“å‡ºä¼˜åŒ–**ï¼?
   - `RESCONTRL`é™åˆ¶ç»“æœæ–‡ä»¶æ•°é‡
   - `OUTRES`æ§åˆ¶è¾“å‡ºé¢‘ç‡
   - åªä¿å­˜å¿…è¦æ—¶é—´ç‚¹çš„ç»“æ?

ä¸‹ä¸€éƒ¨åˆ†å°†è®²è§£åå¤„ç†ä¸ç†”æ± è·Ÿè¸ªåˆ†æã€
# APDL ä»£ç é€å¥è®²è§£ - ç¬?éƒ¨åˆ†ï¼šå®æ—¶ç†”æ± åŠ¨æ€æ¨¡æ‹?

## ç¬?81-820è¡Œï¼šç†”æ± çŠ¶æ€è·Ÿè¸ªæœºåˆ?

```apdl
!-----------------------------------!
! Real-time melt pool monitoring    !
!-----------------------------------!
*DIM, P_MELT_TIME, ARRAY, n_mul_layer_, n_PASS_, Dist_step_
```
**åŠŸèƒ½**ï¼šåˆ›å»ºä¸‰ç»´æ•°ç»„å­˜å‚¨ç†”æ± çŠ¶æ€æ•°æ?
- ç»´åº¦ï¼?0 å±?Ã— 50 ä¸ªé“æ¬?Ã— 100 æ‰«ææ­?
- **ç”¨é€?*ï¼šå®æ—¶è®°å½•æ¯ä¸ªç‚¹çš„ç†”æ± å°ºå¯¸å’Œæ¸©åº¦

```apdl
*DO, i_layer, 1, n_mul_layer_, 1
    ! Set monitoring points
    NSEL, S, LOC, Z, Activation_height_%i_layer% 
    CM, N_MONITOR_%i_layer%, NODE
```
**åŠŸèƒ½**ï¼šåˆ›å»ºç›‘æ§ç‚¹ç»„ä»¶
- ä½ç½®ï¼šå±‚é¡¶é¢ (Z = i_layer Ã— 500Î¼m)
- `CM`ï¼šåˆ›å»ºèŠ‚ç‚¹ç»„ä»¶ï¼ˆN_MONITOR1ï¼ŒN_MONITOR2ç­‰ï¼‰

```apdl
    *DO, i_step, 1, n_PASS_, 1
        *DO, i_dist, 1, Dist_step_, 1
            ! Track melt pool geometry
            CMSEL, S, N_MONITOR_%i_layer%
            NSEL, R, LOC, X, X_START%i_PASS%+(i_dist-1)*STEP_DIS-2*R0, X_START%i_PASS%+(i_dist-1)*STEP_DIS+2*R0
            NSEL, R, LOC, Y, Y_START%i_PASS%+V_SCAN*(i_dist-1)*DT_-R0, Y_START%i_PASS%+V_SCAN*(i_dist-1)*DT_+R0
```
**åŠŸèƒ½**ï¼šé€‰æ‹©å½“å‰ç›‘æµ‹çª—å£åŒºåŸŸ
- XYèŒƒå›´ï¼šæ¿€å…‰ä½ç½?Â± 2å€å…‰æ–‘åŠå¾?(100Î¼m)
- **ç›®çš„**ï¼šæ•è·ç†”æ± åŠçƒ­å½±å“åŒº

```apdl
            ! Extract melt pool parameters
            *GET, Temp_max_, SORT, , MAX, TEMP
            *GET, Temp_min_, SORT, , MIN, TEMP
            NSEL, R, TEMP, , TEMP_MELT_, Temp_max_
            *GET, Area_melt_, AREA, , AREA
            *GET, Depth_melt_, Z, , MAX
```
**åŠŸèƒ½**ï¼šæå–ç†”æ± å…³é”®å‚æ•?
- `Temp_max_/min`ï¼šç†”æ± å†…æœ€é«?æœ€ä½æ¸©åº?
- `Area_melt_`ï¼šè¶…è¿‡ç†”ç‚¹æ¸©åº¦çš„åŒºåŸŸé¢ç§¯
- `Depth_melt_`ï¼šç†”æ·±ï¼ˆZæ–¹å‘æœ€å¤§å€¼ï¼‰

```apdl
            ! Store monitoring data
            P_MELT_TIME(i_layer, i_step, i_dist) = Temp_max_
            P_MELT_TIME(i_layer, i_step, i_dist+1) = Area_melt_
            P_MELT_TIME(i_layer, i_step, i_dist+2) = Depth_melt_
*ENDDO
```
**åŠŸèƒ½**ï¼šç†”æ± æ•°æ®å¤šç»´å­˜å‚?
- æ¸©åº¦æ•°æ®ï¼šç¬¬ä¸‰ç»´ç´¢å¼• (i_dist)
- é¢ç§¯æ•°æ®ï¼ši_dist+1
- ç†”æ·±æ•°æ®ï¼ši_dist+2

---

## ç¬?21-860è¡Œï¼šåŠ¨æ€ç†”æ± æ¼”åŒ–ç®—æ³?

```apdl
! Melt pool evolution algorithm !
*VWRITE, P_MELT_TIME(1,1,1), P_MELT_TIME(1,1,2), P_MELT_TIME(1,1,3)
(3F15.6)
```
**åŠŸèƒ½**ï¼šå°†é€‰å®šç†”æ± æ•°æ®å†™å…¥æ–‡æœ¬æ–‡ä»¶
- æ ¼å¼ï¼šæ¸©åº?+ é¢ç§¯ + ç†”æ·±ï¼ˆå›ºå®?5å­—ç¬¦å®½åº¦ï¼?

```apdl
! Real-time visualization control
/VIEW, 1, 1, 1, 1
/PNUM, SVAL, 1
/DSCALE, 1, 2
```
**åŠŸèƒ½**ï¼šåå¤„ç†å¯è§†åŒ–å‚æ•°è®¾ç½?
- `/VIEW`ï¼šç­‰è½´æµ‹è§†å›¾
- `/PNUM`ï¼šæ˜¾ç¤ºèŠ‚ç‚¹æ•°å€?
- `/DSCALE`ï¼šæ”¾å¤§æ˜¾ç¤ºæ¯”ä¾?

```apdl
*DO, i_frame, 1, n_frame_, 1
    ! Set display time
    SET, , , , , , t_frame_%i_frame%
    PLNSOL, TEMP, , 0, 1
```
**åŠŸèƒ½**ï¼šç”Ÿæˆé€å¸§æ¸©åº¦åœºåŠ¨ç”?
- `SET`ï¼šè®¾ç½®ç»“æœæ—¶é—´ç‚¹ï¼ˆi_frameÃ—0.002sï¼?
- `PLNSOL`ï¼šç»˜åˆ¶æ¸©åº¦äº‘å›?

```apdl
    ! Extract melt pool boundary
    NSEL, S, TEMP, , TEMP_MELT_, 
    PLNSOL, TEMP, , 0, 1
    CM, MELT_POOL_%i_frame%, NODE
    *GET, n_melt_node, NODE, 0, COUNT
```
**åŠŸèƒ½**ï¼šè¯†åˆ«å¹¶å­˜å‚¨ç†”æ± è¾¹ç•ŒèŠ‚ç‚¹

```apdl
    ! Calculate pool aspect ratio
    *GET, X_max, NODE, , MXLOC, X
    *GET, X_min, NODE, , MNLOC, X
    *GET, Y_max, NODE, , MXLOC, Y
    *GET, Y_min, NODE, , MNLOC, Y
    Ratio_xy = (X_max-X_min)/(Y_max-Y_min)
```
**åŠŸèƒ½**ï¼šè®¡ç®—ç†”æ± å½¢çŠ¶å› å­?
- $Ratio_{xy} = \frac{L_x}{L_y}$ï¼šåæ˜ ç†”æ± å„å‘å¼‚æ€§ç¨‹åº?

```apdl
    ! Critical instability detection
    *IF, Ratio_xy, GT, 3.5, OR, Ratio_xy, LT, 0.25, THEN
        *MSG, WARN
        'MELT POOL INSTABILITY DETECTED AT TIME = %t_frame_%i_frame%'
    *ENDIF
*ENDDO
```
**åŠŸèƒ½**ï¼šç†”æ± å¤±ç¨³é¢„è­¦æœºåˆ?
- å½?Ratio_{xy} > 3.5$æˆ? < 0.25$æ—¶å‘å‡ºè­¦å‘?
- **ç‰©ç†æ„ä¹‰**ï¼šé¢„é˜²çƒåŒ–æˆ–é•¿å­”ç¼ºé™·

---

## ç¬?61-900è¡Œï¼šå¢æåˆ¶é€ è·¯å¾„ä¼˜åŒ–ç­–ç•?

```apdl
! Adaptive path adjustment !
*IF, Melt_Defect_flag, EQ, 1, THEN
    ! Layer-based optimization
    *DO, i_opt_layer, 2, n_mul_layer_-1, 1
        ! Analyze historical melt data
        Sum_depth = 0
        *DO, i_hist, 1, i_opt_layer-1, 1
            Sum_depth = Sum_depth + Depth_melt_avg_%i_hist%
        *ENDDO
        Avg_growth = Sum_depth/(i_opt_layer-1)
```
**åŠŸèƒ½**ï¼šè®¡ç®—ç´¯ç§¯ç†”æ·±å¹³å‡å€?
- **å…¬å¼**ï¼?\frac{\sum_{i=1}^{L-1} d_i}{L-1}$

```apdl
        ! Adjust parameters if deviation >15%
        *IF, ABS(Depth_melt_avg_%i_opt_layer% - Avg_growth), GT, 0.15*Avg_growth, THEN
            *MSG, WARN
            'ADJUSTING PARAMETERS FOR LAYER %i_opt_layer%'
            
            ! Parameter correction logic
            *IF, Depth_melt_%i_opt_layer%, GT, Avg_growth, THEN
                V_SCAN = V_SCAN * 1.15
                Q_AVE = Q_AVE * 0.93
            *ELSE
                V_SCAN = V_SCAN * 0.85
                Q_AVE = Q_AVE * 1.07
            *ENDIF
            
            ! Update time parameters
            Step_time_%i_opt_layer% = PL/(n_PASS_ * V_SCAN)
            *DO, j, i_opt_layer, n_mul_layer_, 1
                Layer_start_Time_%j% = Layer_start_Time_%j-1% + Layer_Time_%j-1%
            *ENDDO
        *ENDIF
*ENDDO
```
**åŠŸèƒ½**ï¼šç†”æ·±è¶…å·®è‡ªé€‚åº”ä¿®æ­£ï¼ˆÂ?5%ï¼?
- ç†”æ·±è¿‡å¤§ â†?åŠ é€Ÿæ‰«æï¼ˆ+15%é€Ÿåº¦ï¼‰ï¼Œé™ä½åŠŸç‡ï¼?%ï¼?
- ç†”æ·±ä¸è¶³ â†?é™é€Ÿæ‰«æï¼ˆ15%ï¼‰ï¼Œå¢åŠ åŠŸç‡ï¼?%ï¼?
- **ä¼˜ç‚¹**ï¼šå®æ—¶é¿å…é£æº…ã€æœªç†”åˆç­‰ç¼ºé™?

```apdl
    ! Reinitialize for corrected parameters
    DTime = 0
    /SOLU
    TIME, Layer_start_Time_%i_opt_layer%
*ENDIF
```
**åŠŸèƒ½**ï¼šé‡æ–°æ¨¡æ‹Ÿä¿®æ­£åçš„å‚æ•°é›†

---

## ç¬?01-940è¡Œï¼šææ–™ç›¸å˜æ¨¡å‹ä¸ç»„ç»‡é¢„æµ?

```apdl
! Phase transformation model !
*DIM, PHASE_FRACTION, ARRAY, n_mul_layer_, 3
```
**åŠŸèƒ½**ï¼šåˆ›å»ºç›¸ç»„æˆçŸ©é˜µ
- åˆ—ç´¢å¼•ï¼š1=å¥¥æ°ä½“ï¼Œ2=é©¬æ°ä½“ï¼Œ3=Î´é“ç´ ä½?
- è¡Œç´¢å¼•ï¼šå±‚å·ï¼?-60ï¼?

```apdl
! Koistinen-Marburger é©¬æ°ä½“ç›¸å˜æ¨¡å?
*DO, i_layer, 1, n_mul_layer_, 1
    ! Calculate cooling rate
    *GET, T_max_node, NODE, , MXLOC, TEMP
    *GET, T_max, NODE, T_max_node, TEMP
    T_min = TBottom_
    Cooling_Rate_%i_layer% = (T_max - T_min)/t_inter_cool_
```
**åŠŸèƒ½**ï¼šè®¡ç®—å±‚é—´å†·å´é€Ÿç‡
- **å…¬å¼**ï¼?\dot{T} = \frac{T_{\max} - T_{\text{amb}}}{\Delta t_{\text{cool}}}$

```apldl
    ! Martensitic transformation prediction
    Ms = 450 - 350*CRATIO      ! CRATIO=ç¢³å½“é‡ç³»æ•?
    Mf = Ms - 200
    f_martensite = 1 - EXP(-0.011*(Ms - Temp_min))
```
**åŠŸèƒ½**ï¼šKoistinen-Marburgeræ¨¡å‹è®¡ç®—é©¬æ°ä½“åˆ†æ•?
- `Ms`ï¼šé©¬æ°ä½“èµ·å§‹æ¸©åº¦
- `Mf`ï¼šé©¬æ°ä½“ç»ˆæ­¢æ¸©åº¦
- `f_martensite`ï¼šé©¬æ°ä½“ä½“ç§¯åˆ†æ•°

```apdl
    ! Ferrite/Austenite calculation
    T_800 = TIME when T=800Â°C
    Delta_T = T_max - T_800
    f_Î´ = 0.25/(1+EXP(-0.5*Delta_T))
    f_Î³ = 1 - f_martensite - f_Î´
```
**åŠŸèƒ½**ï¼šè®¡ç®—é“ç´ ä½“å’Œå¥¥æ°ä½“åˆ†æ•°
- `f_Î´`ï¼šåŸºäºé«˜æ¸©Î´é“ç´ ä½“æå‡ºæ¨¡å‹
- `f_Î³`ï¼šæ®‹å¥¥å¹³è¡¡å…¬å¼?

```apdl
    ! Store phase data
    PHASE_FRACTION(i_layer, 1) = f_Î³
    PHASE_FRACTION(i_layer, 2) = f_martensite
    PHASE_FRACTION(i_layer, 3) = f_Î´
*ENDDO
```
**åŠŸèƒ½**ï¼šç›¸ç»„æˆæ•°æ®å­˜å‚¨
- **åº”ç”¨**ï¼šé¢„æµ‹æ‰“å°ä»¶å¾®è§‚ç»„ç»‡åˆ†å¸ƒ

```apdl
*VWRITE, PHASE_FRACTION(1,1), PHASE_FRACTION(1,2), PHASE_FRACTION(1,3)
(3F10.4)
```
**åŠŸèƒ½**ï¼šç›¸ç»„æˆæ•°æ®è¾“å‡º
- æ ¼å¼ï¼šå¥¥æ°ä½“ é©¬æ°ä½?Î´é“ç´ ä½?
- æ–‡ä»¶åï¼šphase_fraction.txtï¼ˆå¾®è§‚ç»„ç»‡é¢„æµ‹ï¼‰

---

**ç¬?éƒ¨åˆ†è®²è§£å®Œæ¯•**ï¼Œæ¶µç›–ï¼š
1. ç†”æ± åŠ¨æ€ç›‘æµ‹ç³»ç»?
2. ç†”æ± çŠ¶æ€è¿½è¸ªä¸å‚æ•°æå–
3. å¢æè·¯å¾„è‡ªé€‚åº”ä¼˜åŒ–ç®—æ³•
4. ææ–™ç›¸å˜é¢„æµ‹æ¨¡å‹
5. å¤±ç¨³æ£€æµ‹æœºåˆ?
6. å®æ—¶è¿‡ç¨‹å‚æ•°è°ƒæ•´

**å…³é”®ç§‘å­¦ä»·å€?*ï¼?
1. **ç†”æ± ç›‘æµ‹ç³»ç»Ÿ**ï¼?
   ```math
   \text{ç†”æ± æ¸©åº¦} \propto Q \times e^{-\frac{{r^2}}{{2R_0^2}}} \times \frac{{V}}{{2\alpha z}}
   ```
   - é«˜æ–¯çƒ­æºä½œç”¨ä¸‹çš„çƒ­æµæ‰©æ•£æ¨¡å‹

2. **è‡ªä¼˜åŒ–åˆ¶é€ ç­–ç•?*ï¼?
   | å¼‚å¸¸ç±»å‹ | è°ƒæ§å‚æ•° | ä¿®æ­£æ–¹å‘ | ç›®æ ‡ |
   |---|---|---|---|
   | é£æº… | æ‰«æé€Ÿåº¦ | +15% | é™ä½èƒ½é‡å¯†åº¦ |
   | å­”éš™ | æ¿€å…‰åŠŸç?| +7% | å‡é«˜èƒ½é‡å¯†åº¦ |
   | çƒåŒ– | æ‰«æé—´è· | +10% | æ”¹å–„ç†”æ± é‡å  |
   | ç¿˜æ›² | é¢„çƒ­æ¸©åº¦ | +50Â°C | é™ä½æ¸©åº¦æ¢¯åº¦ |

3. **ç»„ç»‡é¢„æµ‹æ¨¡å‹ç²¾åº¦**ï¼?
   | æ¨¡å‹ | å…¬å¼ | è¯¯å·® |
   |---|---|---|
   | Koistinen-Marburger | $f_M=1-exp[-k(M_s-T)]$ | $<5\%$ |
   | Î´é“ç´ ä½“æ¨¡å?| $f_Î´ = \frac{a}{1+exp[-b \Delta T]}$ | $<8\%$ |

ä¸‹ä¸€éƒ¨åˆ†å°†è®²è§£æ®‹ä½™åº”åŠ›åœºæ±‚è§£æ–¹æ³•ã€
# APDL ä»£ç é€å¥è®²è§£ - ç¬?éƒ¨åˆ†ï¼šæ®‹ä½™åº”åŠ›ä¸å¾®è§‚ç»„ç»‡åˆ†æ

## ç¬?110-1190è¡Œï¼šåº”åŠ›åˆ†ææ±‚è§£å™¨è®¾ç½?

```apdl
!-------------------------------------------------!
! Mechanical Analysis - Residual Stress Solver    !
!-------------------------------------------------!
/SOLU
NLGEOM, ON
SSTIF, ON
ANTYPE, STATIC
```
**åŠŸèƒ½**ï¼šæ¿€æ´»å¤§å˜å½¢åº”åŠ›åˆ†æ
- `NLGEOM, ON`ï¼šè€ƒè™‘å‡ ä½•éçº¿æ€§ï¼ˆå¤§å˜å½¢æ•ˆåº”ï¼‰
- `SSTIF, ON`ï¼šå¯ç”¨åº”åŠ›åˆšåŒ–æ•ˆåº”ï¼ˆSSTIFï¼?
- `ANTYPE, STATIC`ï¼šç¨³æ€åˆ†æï¼ˆå¿½ç•¥æƒ¯æ€§æ•ˆåº”ï¼‰

```apdl
! Load transfer from thermal analysis
LDREAD, TEMP, , , , , 'FINAL_RESULT', RTH, , , 
```
**åŠŸèƒ½**ï¼šåŠ è½½æ¸©åº¦åœºç»“æœ
- **è·¯å¾„**ï¼?FINAL_RESULT.RTH'ï¼ˆçƒ­åˆ†æç»“æœæ–‡ä»¶ï¼?
- **è¿‡ç¨‹**ï¼šæ¸©åº¦ä½œä¸ºä½“è½½è·å¯¼å…¥ç»“æ„åˆ†æ

```apdl
! Material Properties for structural analysis
MP, EX, 2, 200e3      ! å¼¹æ€§æ¨¡é‡?00GPa
MP, NUXY, 2, 0.3      ! æ³Šæ¾æ¯?.3
TB, BKIN, 2, , 2, 
TBTEMP, 25
TBDATA, 1, 550, 0     ! å±ˆæœå¼ºåº¦550MPa
TBTEMP, 800
TBDATA, 1, 400, 0     ! 800â„ƒä¸‹å±ˆæœå¼ºåº¦400MPa
```
**åŠŸèƒ½**ï¼šå®šä¹‰æ¸©åº¦ç›¸å…³å¼¹å¡‘æ€§ææ–?
- **åŒçº¿æ€§éšåŠ¨å¼ºåŒ–æ¨¡å?BKIN)**
- å…³é”®å‚æ•°åœ¨ä¸åŒæ¸©åº¦ä¸‹æ’å€?

```apdl
! Constraint settings
NSEL, S, LOC, Z, 0
D, ALL, ALL, 0
ALLSEL, ALL
```
**åŠŸèƒ½**ï¼šæ–½åŠ è¾¹ç•Œæ¡ä»?
- åŸºæ¿åº•éƒ¨ (Z=0) å…¨çº¦æ?
- å…¶ä»–è¡¨é¢è‡ªç”±å˜å½¢

---

## ç¬?191-1260è¡Œï¼šå¤šæ­¥éª¤åº”åŠ›æ±‚è§£ç®—æ³?

```apdl
! Multi-step incremental solution algorithm
*DO, i_layer, 1, n_mul_layer_, 1
    ! Birth element control by layer
    ESEL, S, TYPE, , TYPE_SOLID_
    EKILL, ALL
    EALIVE, E_GRA%i_layer%
```
**åŠŸèƒ½**ï¼šé€å±‚æ¿€æ´»ç”Ÿæ­»å•å…?
- æ­¥éª¤1ï¼šæ€æ­»æ‰€æœ‰å•å…?
- æ­¥éª¤2ï¼šä»…æ¿€æ´»å½“å‰æ‰“å°å±‚å•å…ƒ
- **æ¨¡æ‹Ÿé€»è¾‘**ï¼šä»…å·²æ‰“å°éƒ¨åˆ†æ‰¿å—åº”åŠ?

```apdl
    ! Layer activation and cooling simulation
    TIME, Layer_start_Time_%i_layer%
    KBC, 0
    DELTIM, DT_STRUCT_, , , 
    SOLVE
```
**åŠŸèƒ½**ï¼šæ¨¡æ‹Ÿå½“å‰å±‚æ¿€æ´?
- `DT_STRUCT_ = 0.05s`ï¼šåº”åŠ›åˆ†ææ—¶é—´æ­¥
- æ–œå¡åŠ è½½æ–¹å¼ï¼ˆKBC,0ï¼?

```apdl
    ! Cooling phase stress accumulation
    TIME, T_layer_%i_layer%
    NSUBST, TS_struct_, , , 
    SOLVE
*ENDDO
```
**åŠŸèƒ½**ï¼šæ¯å±‚å†·å´ååº”åŠ›ç´¯ç§¯
- `TS_struct_ = 500`ï¼šæ¯ä¸ªå†·å´æ­¥æœ€å¤?00å­æ­¥
- **ç‰©ç†æ„ä¹‰**ï¼šæ•è·å±‚é—´æ”¶ç¼©åº”åŠ›ä¼ é€?

```apdl
! Final cooling stress
TIME, T_total_*3
NSUBST, 500, 2000, 100
SOLVE
```
**åŠŸèƒ½**ï¼šæœ€ç»ˆå†·å´é˜¶æ®µåº”åŠ›åˆ†æ?
- å»¶é•¿åˆ†ææ—¶é—´è‡?å€æ€»æ—¶é—´ï¼ˆT_total_*3ï¼?
- **ç›®çš„**ï¼šç¡®ä¿å®Œå…¨å†·å´è‡³å®¤æ¸©

```apdl
! Save stress results
ALLSEL, ALL
SAVE, Stress_result, DB
FINISH
```
**åŠŸèƒ½**ï¼šä¿å­˜åº”åŠ›ç»“æœæ•°æ®åº“
- æ–‡ä»¶ï¼šStress_result.DB
- **åŒ…å«æ•°æ®**ï¼šèŠ‚ç‚¹ä½ç§»ã€åº”åŠ›å¼ é‡ã€å¡‘æ€§åº”å?

---

## ç¬?261-1320è¡Œï¼šç†”æ± å•å…ƒæå–åˆ†æ

```apdl
!-------------------------------------------------!
! Melt Pool Element Extraction Procedure          !
!-------------------------------------------------!
/POST1
SET, , , , , , T_End_
FILE, Stress_result, RST
```
**åŠŸèƒ½**ï¼šè¿›å…¥åå¤„ç†å™¨åŠ è½½åº”åŠ›ç»“æ?
- `T_End_`ï¼šåˆ†æç»“æŸæ—¶é—´ç‚¹
- `Stress_result.RST`ï¼šåº”åŠ›ç»“æœæ–‡ä»?

```apdl
! Identify melt pool elements
ESEL, S, TYPE, , TYPE_SOLID_
*DIM, MELT_ELEM, ARRAY, 100000
```
**åŠŸèƒ½**ï¼šåˆå§‹åŒ–ç†”æ± å•å…ƒæ•°ç»„
- `TYPE_SOLID_`ï¼šä»…é€‰æ‹©ä¸‰ç»´å®ä½“å•å…ƒ
- `MELT_ELEM`ï¼šå¯å­˜å‚¨100,000ä¸ªå•å…ƒå·

```apdl
! Loop over layers with melt pool activity
*DO, i_layer, 1, n_mul_layer_, 1
    CMSEL, S, E_GRA%i_layer%
    ESEL, R, TEMP, , TEMP_MELT_, 
    CM, MELT_LAYER%i_layer%, ELEM
    
    ! Transfer active elements to array
    *GET, n_elem, ELEM, 0, COUNT
    *VMASK, SEQN
    *VFILL, MELT_ELEM(1), DATA, ELNEXT(0)
*ENDDO
```
**åŠŸèƒ½**ï¼šé€å±‚æå–ç†”åŒ–å•å…ƒæ•°æ®
- **é€‰å–æ¡ä»¶1**ï¼šå½“å‰æ‰“å°å±‚å•å…ƒ
- **é€‰å–æ¡ä»¶2**ï¼šæ¸©åº¦è¶…è¿‡ç†”ç‚?(TEMP_MELT_)
- `MELT_LAYER1â€¦MELT_LAYER60`ï¼šæŒ‰å±‚å­˜å‚¨ç†”æ± å•å…?

```apdl
! Extract melt pool characteristics
*DIM, MELT_CHAR, ARRAY, , 4
*VGET, MELT_CHAR(1,1), ELEM, 1, CENT, X
*VGET, MELT_CHAR(1,2), ELEM, 1, CENT, Y
*VGET, MELT_CHAR(1,3), ELEM, 1, EPPL, EQV
*VGET, MELT_CHAR(1,4), ELEM, 1, TEMP
```
**åŠŸèƒ½**ï¼šæå–ç†”æ± å•å…ƒå…³é”®ç‰¹å¾?
- `CENT,X/Y`ï¼šå•å…ƒä¸­å¿ƒX/Yåæ ‡
- `EPPL,EQV`ï¼šç­‰æ•ˆå¡‘æ€§åº”å?
- `TEMP`ï¼šå•å…ƒå¹³å‡æ¸©åº¦ï¼ˆæœ€åæ—¶åˆ»ï¼‰

```apdl
! Write melt pool stats to file
*CFOPEN, Melt_Data, DAT
*VWRITE, MELT_CHAR(1,1), MELT_CHAR(1,2), MELT_CHAR(1,3), MELT_CHAR(1,4)
(4E14.6)
*CFCLOSE
```
**åŠŸèƒ½**ï¼šè¾“å‡ºç†”æ± ç‰¹å¾æ•°æ?
- **æ ¼å¼**ï¼šXåæ ‡ | Yåæ ‡ | å¡‘æ€§åº”å?| æ¸©åº¦
- **ç”¨é€?*ï¼šç†”æ± å°ºå¯¸ã€åº”å˜åˆ†å¸ƒçƒ­ç‚¹åˆ†æ?

---

## ç¬?321-1380è¡Œï¼šæ®‹ä½™åº”åŠ›å¯è§†åŒ–ä¸åˆ†æ

```apdl
! Post-processing: Residual stress visualization
/VIEW, 1, 1, 1, 1
/DSCALE, 1, 1
PLNSOL, S, EQV, 0, 1.0
```
**åŠŸèƒ½**ï¼šç»˜åˆ¶ç­‰æ•ˆåº”åŠ›äº‘å›?
- **åº”åŠ›åˆ†é‡**ï¼švon Misesç­‰æ•ˆåº”åŠ›
- **ç¼©æ”¾å› å­**ï¼?.0ï¼ˆå®é™…å€¼ï¼‰

```apdl
! Extract critical surfaces
NSEL, S, LOC, Z, MAX_Z_
NSEL, R, LOC, X, 0.2*W_plate_, 0.8*W_plate_
NSEL, R, LOC, Y, 0.2*L_plate_, 0.8*L_plate_
PATH, TOP_SURFACE, 2, , 100
PPATH, 1, , W_plate_*0.2, L_plate_*0.2, MAX_Z_
PPATH, 2, , W_plate_*0.8, L_plate_*0.8, MAX_Z_
```
**åŠŸèƒ½**ï¼šåˆ›å»ºé¡¶å±‚è¡¨é¢è·¯å¾?
- **è·¯å¾„ç«¯ç‚¹**ï¼šåŸºæ¿ä¸­å¿ƒåŒºåŸ?20%-80%)
- **èŠ‚ç‚¹æ•?*ï¼?00ä¸ªé‡‡æ ·ç‚¹

```apdl
! Plot residual stress along path
PDEF, SX, S, X, NOAV
PDEF, SY, S, Y, NOAV
PLPAGM, SX, , , Node
PRPATH, SX, SY
```
**åŠŸèƒ½**ï¼šç»˜åˆ¶è·¯å¾„åº”åŠ›åˆ†å¸?
- `SX`ï¼šXæ–¹å‘æ­£åº”åŠ?
- `SY`ï¼šYæ–¹å‘æ­£åº”åŠ?
- `PRPATH`ï¼šè¾“å‡ºè·¯å¾„åº”åŠ›æ•°å€?

```apdl
! Find stress concentration points
NSORT, S, EQV, , 1
*GET, Max_Stress, SORT, , MAX
*GET, Node_max, NODE, , NUM, MAX
```
**åŠŸèƒ½**ï¼šå®šä½æœ€å¤§åº”åŠ›ç‚¹
- ç­‰æ•ˆåº”åŠ›æ’åº
- è·å–æœ€å¤§å€¼åŠå¯¹åº”èŠ‚ç‚¹å?

```apdl
CMSEL, S, MELT_POOL_LAST
PRNSOL, S, PRIN
```
**åŠŸèƒ½**ï¼šè¾“å‡ºç†”æ± åŒºä¸»åº”åŠ›åˆ†é‡?
- **åˆ†é‡**ï¼šS1(æœ€å¤§ä¸»åº”åŠ›), S2, S3(æœ€å°ä¸»åº”åŠ›)
- **ä½ç½®**ï¼šæœ€ç»ˆç†”æ± å•å…?

---

## ç¬?381-1400è¡Œï¼šç»“æœè¾“å‡ºä¸ç¨‹åºç»ˆç»?

```apdl
! Finalize and exit
ALLSEL, ALL
SAVE, FINAL_DB, DB
FINISH
/EXIT
```
**åŠŸèƒ½**ï¼šä¿å­˜æœ€ç»ˆæ•°æ®åº“å¹¶é€€å‡?
- **æ–‡ä»¶**ï¼šFINAL_DB.DBï¼ˆå®Œæ•´æ¨¡å‹ç»“æœï¼‰
- **çŠ¶æ€?*ï¼šåº”åŠ›åˆ†æä¸åå¤„ç†å®Œæˆ?

```apdl
!-------------------------------------------------!
! STRUCTURAL ANALYSIS MODULE COMPLETED            !
!-------------------------------------------------!
```

---

**ç¬?éƒ¨åˆ†è®²è§£å®Œæ¯•**ï¼Œæ¶µç›–æ ¸å¿ƒå†…å®¹ï¼š

1. **çƒ?åŠ›è€¦åˆæ±‚è§£æ¡†æ¶**ï¼?
   ```mermaid
   graph LR
   A[çƒ­åˆ†æç»“æœ] --> B[ç»“æ„ææ–™æ¨¡å‹]
   A --> C[æ¸©åº¦åœºåˆåº”åŠ›]
   B --> D[æ®‹ä½™åº”åŠ›æ±‚è§£]
   C --> D
   ```

2. **æ®‹ä½™åº”åŠ›åˆ†æå‚æ•°**ï¼?
   | å‚æ•° | å€?| ç‰©ç†æ„ä¹‰ |
   |---|---|---|
   | Î”t_s | 0.05 s | åº”åŠ›å¢é‡æ­?|
   | T_total | 180 s | æ€»æ¨¡æ‹Ÿæ—¶é—?|
   | å­æ­¥ | 100-2000 | éçº¿æ€§æ”¶æ•›ä¿éš?|

3. **ç†”æ± ç‰¹å¾æå–æŠ€æœ?*ï¼?
   - ç©ºé—´åˆ†å¸ƒï¼ˆXYZåæ ‡ï¼?
   - çƒ?åŠ›å­¦çŠ¶æ€ï¼ˆæ¸©åº¦ã€å¡‘æ€§åº”å˜ï¼‰
   - å¾®åŒºåº”åŠ›é›†ä¸­ç‚¹å®šä½?

4. **å¾®è§‚ç»„ç»‡-åº”åŠ›å…³è”æ¨¡å‹**ï¼?
   ```math
   \sigma_{\text{residual}} = f(\dot{T}, \varepsilon_p, \text{Phase\%})
   ```
   - å†·å´é€Ÿç‡($\dot{T}$)
   - å¡‘æ€§åº”å˜ç´¯ç§?$\varepsilon_p$)
   - ç›¸ç»„æˆ?å¥¥æ°ä½?é©¬æ°ä½?é“ç´ ä½“æ¯”ä¾?

**åˆ†æç»“æœåº”ç”¨æ–¹å‘**ï¼?
1. é«˜åº”åŠ›åŒºé¢„æµ‹ â†?æ”¯æ’‘ç»“æ„è®¾è®¡
2. ç†”æ± å½¢è²Œåˆ†æ â†?ä¼˜åŒ–æ‰«æç­–ç•¥
3. å¾®è§‚ç»„ç»‡æ•°æ® â†?çƒ­å¤„ç†å‚æ•°é€‰æ‹©
4. åº”å˜é›†ä¸­ç‚?â†?æ½œåœ¨å¼€è£‚ä½ç½®é¢„è­?

```mermaid
graph TD
A[æ®‹ä½™åº”åŠ›åœº] --> B[é›¶ä»¶ç–²åŠ³æ€§èƒ½]
C[ç†”æ± ç‰¹å¾å‚æ•°] --> D[å·¥è‰ºå‚æ•°ä¼˜åŒ–]
E[å¾®è§‚ç»„ç»‡æ•°æ®] --> F[åå¤„ç†æ–¹æ¡ˆåˆ¶å®š]
```

**ç¨‹åºç»ˆç»“**ï¼šå®Œæ•´æ¨¡æ‹Ÿäº†SLMå¢æåˆ¶é€ å·¥è‰ºçš„çƒ?åŠ›è€¦åˆè¿‡ç¨‹
